# TimeVisual (æ—¶é—´å¯è§†åŒ–ç»Ÿè®¡) PRD

> **ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¶é—´**: 2025-12-15  
> **æœ€åæ›´æ–°**: 2025-12-15  
> **çŠ¶æ€**: åŠŸèƒ½æ•´åˆä¸æ–‡æ¡£åŒ–  
> **ä¾èµ–æ¨¡å—**: EventService, CalendarService, TagManager  
> **å…³è”æ–‡æ¡£**:
> - [TimeLog_&_Description_PRD.md](./TimeLog_&_Description_PRD.md)
> - [TAGMANAGER_MODULE_PRD.md](./TAGMANAGER_MODULE_PRD.md)
> - [TIMECALENDAR_MODULE_PRD.md](./TIMECALENDAR_MODULE_PRD.md)

---

## ğŸ“‹ ç›®å½•

- [1. äº§å“æ¦‚è¿°](#1-äº§å“æ¦‚è¿°)
- [2. æ ¸å¿ƒåŠŸèƒ½](#2-æ ¸å¿ƒåŠŸèƒ½)
- [3. å·²å®ç°çš„æµ‹è¯•é¡µé¢](#3-å·²å®ç°çš„æµ‹è¯•é¡µé¢)
- [4. æŠ€æœ¯æ¶æ„](#4-æŠ€æœ¯æ¶æ„)
- [5. æ•°æ®ç»“æ„](#5-æ•°æ®ç»“æ„)
- [6. æœªæ¥è§„åˆ’](#6-æœªæ¥è§„åˆ’)

---

## 1. äº§å“æ¦‚è¿°

### 1.1 äº§å“å®šä½

TimeVisual æ˜¯ 4DNote çš„æ—¶é—´ç»Ÿè®¡å¯è§†åŒ–ç³»ç»Ÿï¼Œä¸ºç”¨æˆ·æä¾›**å¤šç»´åº¦ã€å¤šç²’åº¦**çš„æ—¶é—´ä½¿ç”¨åˆ†æï¼Œå¸®åŠ©ç”¨æˆ·ï¼š
- ğŸ“Š **äº†è§£æ—¶é—´åˆ†é…**ï¼šæŸ¥çœ‹æ—¶é—´åœ¨ä¸åŒæ ‡ç­¾ã€æ—¥å†ã€é¡¹ç›®ä¸Šçš„åˆ†å¸ƒ
- ğŸ“ˆ **å‘ç°æ—¶é—´è¶‹åŠ¿**ï¼šé€šè¿‡å¯è§†åŒ–å›¾è¡¨å‘ç°æ—¶é—´ä½¿ç”¨æ¨¡å¼å’Œå˜åŒ–
- ğŸ¯ **ä¼˜åŒ–æ—¶é—´ç®¡ç†**ï¼šåŸºäºæ•°æ®æ´å¯Ÿè°ƒæ•´æ—¶é—´å®‰æ’
- ğŸ” **æ·±åº¦åˆ†æå…³è”**ï¼šå‘ç°æ ‡ç­¾ä¹‹é—´çš„å…³è”å…³ç³»å’Œå…±ç°æ¨¡å¼

### 1.2 è®¾è®¡ç†å¿µ

- **å¤šç»´åº¦ç»Ÿè®¡**ï¼šæ”¯æŒæŒ‰æ ‡ç­¾ã€æ—¥å†ã€æ—¶é—´æ®µç­‰å¤šä¸ªç»´åº¦ç»Ÿè®¡
- **å¤šç²’åº¦å±•ç¤º**ï¼šä»15åˆ†é’Ÿåƒç´ å—åˆ°æœˆåº¦è¶‹åŠ¿çš„å¤šå±‚æ¬¡å±•ç¤º
- **äº¤äº’å¼æ¢ç´¢**ï¼šé€šè¿‡ç‚¹å‡»ã€æ‚¬åœç­‰äº¤äº’æ·±å…¥äº†è§£æ•°æ®ç»†èŠ‚
- **ç¾è§‚ç°ä»£**ï¼šé‡‡ç”¨æ¸å˜è‰²ã€åœ†è§’ã€åŠ¨ç”»ç­‰ç°ä»£UIè®¾è®¡

---

## 2. æ ¸å¿ƒåŠŸèƒ½

### 2.1 æ ‡ç­¾ç»´åº¦ç»Ÿè®¡

**åŠŸèƒ½æè¿°**ï¼šç»Ÿè®¡äº‹ä»¶æŒ‰æ ‡ç­¾çš„æ—¶é•¿åˆ†å¸ƒå’Œé¢‘æ¬¡

**å¯è§†åŒ–æ–¹å¼**ï¼š
- ğŸ¥§ **é¥¼å›¾**ï¼šå±•ç¤ºå„æ ‡ç­¾çš„æ—¶é•¿å æ¯”ï¼ˆå¸¦åœ†è§’é—´éš™è®¾è®¡ï¼‰
- ğŸ“‹ **åˆ—è¡¨è§†å›¾**ï¼šæ˜¾ç¤ºæ ‡ç­¾è¯¦ç»†ä¿¡æ¯ï¼ˆæ—¶é•¿ã€äº‹ä»¶æ•°ã€ç™¾åˆ†æ¯”ã€è¿›åº¦æ¡ï¼‰
- ğŸ·ï¸ **å±‚çº§æ ‡æ³¨**ï¼šæ˜¾ç¤ºæ ‡ç­¾çš„å±‚çº§ï¼ˆL0, L1, L2...ï¼‰

**æ•°æ®ç»´åº¦**ï¼š
- æ ‡ç­¾åç§°ä¸ Emoji
- æ€»æ—¶é•¿ï¼ˆå°æ—¶ + åˆ†é’Ÿï¼‰
- äº‹ä»¶æ•°é‡
- å æ¯”ç™¾åˆ†æ¯”
- æ ‡ç­¾é¢œè‰²ä¸å±‚çº§

**äº¤äº’åŠŸèƒ½**ï¼š
- ç‚¹å‡»æ ‡ç­¾æŸ¥çœ‹è¯¦ç»†äº‹ä»¶åˆ—è¡¨
- æ‚¬åœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆåç§°ã€æ—¶é•¿ã€ç™¾åˆ†æ¯”ï¼‰
- æ”¯æŒæ—¶é—´èŒƒå›´ç­›é€‰

---

### 2.2 æ—¥å†ç»´åº¦ç»Ÿè®¡

**åŠŸèƒ½æè¿°**ï¼šç»Ÿè®¡äº‹ä»¶æŒ‰æ—¥å†åˆ†ç»„çš„æ—¶é•¿åˆ†å¸ƒ

**å¯è§†åŒ–æ–¹å¼**ï¼š
- ğŸ¥§ **é¥¼å›¾**ï¼šå±•ç¤ºå„æ—¥å†çš„æ—¶é•¿å æ¯”
- ğŸ“‹ **åˆ—è¡¨è§†å›¾**ï¼šæ˜¾ç¤ºæ—¥å†è¯¦ç»†ä¿¡æ¯ï¼ˆå¸¦æ¥æºæ ‡ç­¾ï¼‰
- ğŸ¨ **é¢œè‰²æ ‡è¯†**ï¼šæ¯ä¸ªæ—¥å†ä½¿ç”¨ç‹¬ç‰¹é¢œè‰²

**æ•°æ®ç»´åº¦**ï¼š
- æ—¥å†åç§°
- æ—¥å†æ¥æºï¼ˆOutlookã€Googleã€Localï¼‰
- æ€»æ—¶é•¿
- äº‹ä»¶æ•°é‡
- å æ¯”ç™¾åˆ†æ¯”

**æ¥æºè¯†åˆ«**ï¼š
- ğŸ”µ Outlook å¯¼å…¥ï¼ˆè“è‰²æ ‡ç­¾ï¼‰
- ğŸ”´ Google å¯¼å…¥ï¼ˆçº¢è‰²æ ‡ç­¾ï¼‰
- ğŸŸ£ æœ¬åœ°åˆ›å»ºï¼ˆç´«è‰²æ ‡ç­¾ï¼‰

---

### 2.3 æ¯æ—¥æ—¶é—´ç»Ÿè®¡

**åŠŸèƒ½æè¿°**ï¼šå•æ—¥ç»´åº¦çš„è¯¦ç»†æ—¶é—´åˆ†æ

**å¯è§†åŒ–æ–¹å¼**ï¼š
- â° **24å°æ—¶æ—¶é—´è½´**ï¼šæ°´å¹³æ¡å½¢å›¾ï¼Œæ¯å°æ—¶æ˜¾ç¤ºäº‹ä»¶æ—¶é•¿
  - AMï¼ˆ0-11ç‚¹ï¼‰ï¼šä¸ŠåŠéƒ¨åˆ†
  - PMï¼ˆ12-23ç‚¹ï¼‰ï¼šä¸‹åŠéƒ¨åˆ†
  - ç©ºç™½æ—¶æ®µç”¨æµ…è‰²è¡¨ç¤º
  
- ğŸ¥§ **åˆ†ç±»é¥¼å›¾**ï¼šå½“æ—¥äº‹ä»¶çš„åˆ†ç±»å æ¯”
  - ä¸­å¿ƒæ˜¾ç¤ºæ€»æ—¶é•¿
  - åœ†ç¯å±•ç¤ºå„åˆ†ç±»
  
- ğŸ“Š **ç»Ÿè®¡æ‘˜è¦**ï¼š
  - æ€»å¿™ç¢Œæ—¶é•¿
  - æ€»ç©ºé—²æ—¶é•¿
  - äº‹ä»¶åˆ†ç±»æ•°

**äº¤äº’åŠŸèƒ½**ï¼š
- æ—¥æœŸé€‰æ‹©å™¨ï¼ˆä¸Šä¸€å¤©/ä¸‹ä¸€å¤©ï¼‰
- æ‚¬åœæ˜¾ç¤ºäº‹ä»¶è¯¦æƒ…
- ç‚¹å‡»æŸ¥çœ‹å…·ä½“æ—¶é—´æ®µ

**é€‚ç”¨åœºæ™¯**ï¼š
- å›é¡¾å•æ—¥æ—¶é—´ä½¿ç”¨
- åˆ†æå·¥ä½œæ—¥ vs ä¼‘æ¯æ—¥çš„å·®å¼‚
- å‘ç°æ—¶é—´æµªè´¹çš„æ—¶æ®µ

---

### 2.4 è¶‹åŠ¿åˆ†æï¼ˆå¤šæ—¥å¯¹æ¯”ï¼‰

#### 2.4.1 åƒç´ å—è§†å›¾ï¼ˆ15åˆ†é’Ÿç²’åº¦ï¼‰

**åŠŸèƒ½æè¿°**ï¼šå°†æ¯å¤©åˆ’åˆ†ä¸º 96 ä¸ª 15åˆ†é’Ÿå—ï¼Œç”¨é¢œè‰²è¡¨ç¤ºæ´»åŠ¨ç±»å‹

**å¯è§†åŒ–è®¾è®¡**ï¼š
- ğŸ“… **æŒ‰å‘¨åˆ†ç»„**ï¼šè‡ªåŠ¨å°†æ—¥æœŸæŒ‰è‡ªç„¶å‘¨åˆ†ç»„æ˜¾ç¤º
- ğŸŒ“ **AM/PMåˆ†ç¦»**ï¼š
  - AMï¼ˆ6:00-11:45ï¼‰ï¼šå‘ä¸Šæ’åˆ—
  - PMï¼ˆ12:00-23:45ï¼‰ï¼šå‘ä¸‹æ’åˆ—
  - ä»¥ 12:00 ä¸ºä¸­è½´çº¿
  
- ğŸ¨ **è‰²å—æ˜ å°„**ï¼š
  - æ¯ä¸ª 15åˆ†é’Ÿå—æ ¹æ®æ—¥å†/æ ‡ç­¾ç€è‰²
  - ç©ºé—²æ—¶æ®µæ˜¾ç¤ºä¸ºæµ…ç°è‰²
  - æ‚¬åœæ˜¾ç¤ºå…·ä½“æ—¶é—´å’Œæ´»åŠ¨åç§°

- ğŸ·ï¸ **å›¾ä¾‹ç³»ç»Ÿ**ï¼š
  - æ˜¾ç¤º Top 10 æœ€å¸¸ç”¨çš„åˆ†ç±»
  - æ ‡æ³¨ä½¿ç”¨æ¬¡æ•°

**æ•°æ®å±•ç¤º**ï¼š
- å‘¨æ•°æ ‡æ³¨ï¼ˆç¬¬Xå‘¨ï¼‰
- æ—¥æœŸæ ‡æ³¨ï¼ˆæœˆ-æ—¥ï¼‰
- æ˜ŸæœŸæ ‡æ³¨ï¼ˆä¸€ã€äºŒã€ä¸‰...ï¼‰
- å°æ—¶åˆ»åº¦ï¼ˆå·¦ä¾§æ ‡æ³¨ï¼‰

**äº¤äº’åŠŸèƒ½**ï¼š
- æ‚¬åœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆæ—¥æœŸã€å‘¨æ•°ã€å‘¨å‡ ï¼‰
- æ‚¬åœåƒç´ å—æ˜¾ç¤ºæ—¶é—´å’Œæ´»åŠ¨
- è‡ªåŠ¨è®¡ç®—å¹¶æ˜¾ç¤ºæ€»å¤©æ•°ã€æ€»æ—¶é•¿ã€æ€»äº‹ä»¶æ•°

**é€‚ç”¨åœºæ™¯**ï¼š
- å‘ç°ä½œæ¯è§„å¾‹
- å¯¹æ¯”å·¥ä½œæ—¥ä¸å‘¨æœ«
- è¯†åˆ«é«˜äº§æ—¶æ®µ

---

#### 2.4.2 æŠ˜çº¿å›¾è§†å›¾

**åŠŸèƒ½æè¿°**ï¼šæŒ‰å¤©ç»Ÿè®¡æ€»æ—¶é•¿ï¼Œç”¨æŠ˜çº¿å›¾å±•ç¤ºæ—¶é—´è¶‹åŠ¿

**å¯è§†åŒ–è®¾è®¡**ï¼š
- ğŸ“ˆ **æ¸å˜å¡«å……**ï¼šçº¿ä¸‹æ–¹ä½¿ç”¨ç´«è‰²æ¸å˜å¡«å……
- ğŸ“ **æ•°æ®ç‚¹æ ‡æ³¨**ï¼šæ¯å¤©çš„æ—¶é•¿æ ‡è®°ä¸ºåœ†ç‚¹
- ğŸ“ **ç½‘æ ¼çº¿**ï¼šYè½´æ˜¾ç¤ºæ—¶é•¿åˆ»åº¦ï¼ŒXè½´æ˜¾ç¤ºæ—¥æœŸ
- ğŸ’¡ **æ‚¬åœæç¤º**ï¼šæ˜¾ç¤ºæ—¥æœŸã€æ—¶é•¿ã€äº‹ä»¶æ•°

**æ•°æ®ç»´åº¦**ï¼š
- æ—¥æœŸï¼ˆXè½´ï¼‰
- æ€»æ—¶é•¿ï¼ˆYè½´ï¼‰
- äº‹ä»¶æ•°é‡ï¼ˆtooltipï¼‰

**è§†å›¾åˆ‡æ¢**ï¼š
- åƒç´ å—è§†å›¾ â†” æŠ˜çº¿å›¾è§†å›¾
- æ— ç¼åˆ‡æ¢ï¼Œæ•°æ®ä¿æŒä¸€è‡´

---

### 2.5 æ ‡ç­¾å…³è”åˆ†æ

**åŠŸèƒ½æè¿°**ï¼šåˆ†ææ ‡ç­¾ä¹‹é—´çš„å…±ç°å…³ç³»

**å¯è§†åŒ–æ–¹å¼**ï¼š
- ğŸ”— **å…³è”çŸ©é˜µ**ï¼šå±•ç¤ºæ ‡ç­¾å¯¹çš„å…±ç°é¢‘æ¬¡ Top 10
- ğŸ“Š **å…±ç°ç»Ÿè®¡**ï¼š`æ ‡ç­¾A + æ ‡ç­¾B = Næ¬¡`

**ç®—æ³•é€»è¾‘**ï¼š
- éå†æ‰€æœ‰äº‹ä»¶
- ç»Ÿè®¡æ¯å¯¹æ ‡ç­¾åœ¨åŒä¸€äº‹ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°
- æŒ‰é¢‘æ¬¡æ’åºï¼Œå–å‰10

**åº”ç”¨åœºæ™¯**ï¼š
- å‘ç°å¸¸è§çš„æ ‡ç­¾ç»„åˆï¼ˆå¦‚"å·¥ä½œ + ä¼šè®®"ï¼‰
- è¯†åˆ«éœ€è¦æ‹†åˆ†çš„æ ‡ç­¾
- ä¼˜åŒ–æ ‡ç­¾åˆ†ç±»ä½“ç³»

---

### 2.6 ç»¼åˆæ€»è§ˆé¢æ¿

**åŠŸèƒ½æè¿°**ï¼šåœ¨ç»Ÿè®¡é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºå…³é”®æŒ‡æ ‡

**æ•°æ®æŒ‡æ ‡**ï¼š
- ğŸ“… **æ€»äº‹ä»¶æ•°**ï¼šæ—¶é—´èŒƒå›´å†…çš„äº‹ä»¶æ€»æ•°
- â±ï¸ **æ€»æ—¶é•¿**ï¼šç´¯è®¡æ—¶é•¿ï¼ˆå°æ—¶ + åˆ†é’Ÿï¼‰
- ğŸ·ï¸ **æœ‰æ ‡ç­¾äº‹ä»¶**ï¼šåŒ…å«è‡³å°‘1ä¸ªæ ‡ç­¾çš„äº‹ä»¶æ•°
- ğŸ“† **æœ‰æ—¥å†äº‹ä»¶**ï¼šå…³è”æ—¥å†çš„äº‹ä»¶æ•°
- â“ **æ— åˆ†ç»„äº‹ä»¶**ï¼šæ—¢æ— æ ‡ç­¾ä¹Ÿæ— æ—¥å†çš„äº‹ä»¶æ•°
- ğŸ“Œ **æ ‡ç­¾æ€»æ•°**ï¼šä½¿ç”¨çš„æ ‡ç­¾ç§ç±»æ•°

**æ ·å¼è®¾è®¡**ï¼š
- å¡ç‰‡å¼å¸ƒå±€
- æ•°å­—å¤§å·æ˜¾ç¤º
- æ ‡ç­¾å°å­—è¯´æ˜
- æ¸å˜èƒŒæ™¯

---

## 3. å·²å®ç°çš„æµ‹è¯•é¡µé¢

### 3.1 test-stats-full.html

**æ–‡ä»¶è·¯å¾„**ï¼š`c:\Users\Zoey\4DNote\public\test-stats-full.html`

**åŠŸèƒ½æ¦‚è¿°**ï¼š
- âœ… æ ‡ç­¾ç»´åº¦ç»Ÿè®¡ï¼ˆé¥¼å›¾ + åˆ—è¡¨ï¼‰
- âœ… æ—¥å†ç»´åº¦ç»Ÿè®¡ï¼ˆé¥¼å›¾ + åˆ—è¡¨ï¼‰
- âœ… æ ‡ç­¾å…³è”åˆ†æï¼ˆå…±ç°çŸ©é˜µï¼‰
- âœ… è¶‹åŠ¿åˆ†æï¼ˆåƒç´ å—è§†å›¾ + æŠ˜çº¿å›¾è§†å›¾ï¼‰
- âœ… ç»¼åˆæ€»è§ˆé¢æ¿
- âœ… æ—¥æœŸèŒƒå›´ç­›é€‰
- âœ… æ•°æ®å¯¼å…¥åŠŸèƒ½

**é¡µé¢ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š 4DNote ç»Ÿè®¡åŠŸèƒ½æµ‹è¯•                      â”‚
â”‚  [åˆ·æ–°ç»Ÿè®¡] [å¯¼å…¥æ•°æ®] [æ—¥æœŸèŒƒå›´é€‰æ‹©]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ˆ æ€»è§ˆç»Ÿè®¡                                 â”‚
â”‚  [æ€»äº‹ä»¶æ•°] [æ€»æ—¶é•¿] [æœ‰æ ‡ç­¾] [æœ‰æ—¥å†] ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tab: [ğŸ·ï¸ æ ‡ç­¾ç»Ÿè®¡] [ğŸ“… æ—¥å†ç»Ÿè®¡]            â”‚
â”‚       [ğŸ”— å…³è”åˆ†æ] [ğŸ“ˆ è¶‹åŠ¿åˆ†æ]            â”‚
â”‚                                             â”‚
â”‚  [é¥¼å›¾]          [åˆ—è¡¨è§†å›¾]                  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š
- åœ†è§’é—´éš™é¥¼å›¾ï¼ˆ4åº¦é—´éš™ï¼Œ10pxåœ†è§’ï¼‰
- æ¸å˜è‰²è®¾è®¡ï¼ˆ#667eea â†’ #764ba2ï¼‰
- å“åº”å¼å¸ƒå±€ï¼ˆGrid + Flexboxï¼‰
- Tooltip äº¤äº’å¢å¼º
- è¿›åº¦æ¡åŠ¨ç”»æ•ˆæœ

**ä»£ç è¡Œæ•°**ï¼š2157 è¡Œ

**æ ¸å¿ƒåŠŸèƒ½å‡½æ•°**ï¼š
- `loadStats()` - åŠ è½½æ‰€æœ‰ç»Ÿè®¡æ•°æ®
- `renderTagStats()` - æ¸²æŸ“æ ‡ç­¾ç»Ÿè®¡
- `renderCalendarStats()` - æ¸²æŸ“æ—¥å†ç»Ÿè®¡
- `renderCorrelation()` - æ¸²æŸ“å…³è”åˆ†æ
- `renderTrends()` - æ¸²æŸ“è¶‹åŠ¿åˆ†æ
- `renderPixelView()` - æ¸²æŸ“åƒç´ å—è§†å›¾
- `renderLineChart()` - æ¸²æŸ“æŠ˜çº¿å›¾
- `renderPieChart()` - é€šç”¨é¥¼å›¾æ¸²æŸ“ï¼ˆå¸¦åœ†è§’ï¼‰
- `createRoundedArcPath()` - SVGåœ†è§’åœ†ç¯è·¯å¾„ç”Ÿæˆ

---

### 3.2 test-stats-daily.html

**æ–‡ä»¶è·¯å¾„**ï¼š`c:\Users\Zoey\4DNote\public\test-stats-daily.html`

**åŠŸèƒ½æ¦‚è¿°**ï¼š
- âœ… å•æ—¥24å°æ—¶æ—¶é—´è½´
- âœ… åˆ†ç±»é¥¼å›¾ï¼ˆå¸¦ä¸­å¿ƒç»Ÿè®¡ï¼‰
- âœ… åˆ†ç±»å›¾ä¾‹åˆ—è¡¨
- âœ… ç»Ÿè®¡æ‘˜è¦ï¼ˆå¿™ç¢Œ/ç©ºé—²æ—¶é•¿ï¼‰
- âœ… æ—¥æœŸå¯¼èˆªï¼ˆä¸Šä¸€å¤©/ä¸‹ä¸€å¤©ï¼‰

**é¡µé¢ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¯æ—¥æ—¶é—´ç»Ÿè®¡                            â”‚
â”‚  [â—€ 12æœˆ15æ—¥ â–¶]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚   24å°æ—¶è½´    â”‚   åˆ†ç±»é¥¼å›¾    â”‚
â”‚  AMè½´   â”‚   (æ¡å½¢å›¾)    â”‚   +å›¾ä¾‹       â”‚
â”‚  PMè½´   â”‚               â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ€»å¿™ç¢Œ: 8h 30m  |  æ€»ç©ºé—²: 15h 30m     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§†è§‰è®¾è®¡**ï¼š
- åŒæ å¸ƒå±€ï¼ˆæ—¶é—´è½´ + é¥¼å›¾ï¼‰
- å°æ—¶æ ‡ç­¾ï¼ˆ0-11 AMï¼Œ12-23 PMï¼‰
- æ¸å˜è‰²Headerï¼ˆ#667eea â†’ #764ba2ï¼‰
- ç©ºç™½æ—¶æ®µæµ…è‰²æ˜¾ç¤º

**ä»£ç è¡Œæ•°**ï¼š916 è¡Œ

**æ ¸å¿ƒåŠŸèƒ½å‡½æ•°**ï¼š
- `loadDayStats()` - åŠ è½½å•æ—¥ç»Ÿè®¡
- `calculateHourlyData()` - è®¡ç®—æ¯å°æ—¶æ•°æ®
- `calculateCategoryStats()` - è®¡ç®—åˆ†ç±»ç»Ÿè®¡
- `renderTimeline()` - æ¸²æŸ“24å°æ—¶è½´
- `renderPieChart()` - æ¸²æŸ“é¥¼å›¾
- `renderLegend()` - æ¸²æŸ“å›¾ä¾‹
- `createHourRow()` - åˆ›å»ºå°æ—¶è¡Œ

---

### 3.3 test-vertical-line-status.html

**æ–‡ä»¶è·¯å¾„**ï¼š`c:\Users\Zoey\4DNote\public\test-vertical-line-status.html`

**åŠŸèƒ½æ¦‚è¿°**ï¼š
- âœ… äº‹ä»¶çŠ¶æ€ç«–çº¿æ ‡è¯†æµ‹è¯•
- âœ… Wordä¿®è®¢æ¨¡å¼é£æ ¼çš„çŠ¶æ€æ˜¾ç¤º
- âœ… å¤šç§çŠ¶æ€ç±»å‹å±•ç¤ºï¼ˆNew, Done, Updated, Missed, Deletedï¼‰

**é¡µé¢ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç«–çº¿çŠ¶æ€æµ‹è¯• - Wordä¿®è®¢æ¨¡å¼é£æ ¼         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ New    â”ƒ â˜‘ å®Œæˆé¡¹ç›®æŠ¥å‘Š                 â”‚
â”‚ Done   â”ƒ â˜‘ å›¢é˜Ÿä¼šè®®                     â”‚
â”‚ Updatedâ”ƒ â˜‘ ä»£ç å®¡æŸ¥                     â”‚
â”‚ Missed â”ƒ â˜ å¥èº«è®¡åˆ’                     â”‚
â”‚ Deletedâ”ƒ â˜ (å·²åˆ é™¤çš„äº‹ä»¶)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€é¢œè‰²**ï¼š
- ğŸ”µ **New** - è“è‰²ï¼ˆ#3B82F6ï¼‰
- ğŸŸ¢ **Done** - ç»¿è‰²ï¼ˆ#10B981ï¼‰
- ğŸŸ¡ **Updated** - æ©™è‰²ï¼ˆ#F59E0Bï¼‰
- ğŸ”´ **Missed** - çº¢è‰²ï¼ˆ#EF4444ï¼‰
- âšª **Deleted** - ç°è‰²ï¼ˆ#9CA3AFï¼‰

**è®¾è®¡ç‰¹ç‚¹**ï¼š
- 3pxç«–çº¿ï¼Œé«˜åº¦20px
- å·¦ä¾§æ ‡ç­¾ï¼ˆitalic + boldï¼‰
- å¤é€‰æ¡† + äº‹ä»¶å†…å®¹
- æœ€å°åŒ–è®¾è®¡ï¼Œèšç„¦çŠ¶æ€æ ‡è¯†

**ä»£ç è¡Œæ•°**ï¼š235 è¡Œ

**åº”ç”¨åœºæ™¯**ï¼š
- ç”¨äº TimeLog é¡µé¢çš„äº‹ä»¶çŠ¶æ€å¯è§†åŒ–
- å¸®åŠ©ç”¨æˆ·å¿«é€Ÿè¯†åˆ«äº‹ä»¶çŠ¶æ€å˜åŒ–
- æä¾› Word é£æ ¼çš„ä¿®è®¢è¿½è¸ªä½“éªŒ

---

### 3.4 å…¶ä»–ç›¸å…³æµ‹è¯•é¡µé¢

#### test-data-flow.html
- æµ‹è¯•æ•°æ®æµå’Œæ›´æ–°æœºåˆ¶
- éªŒè¯äº‹ä»¶çš„å¢åˆ æ”¹æŸ¥

#### test-circular-updates.html
- æµ‹è¯•å¾ªç¯æ›´æ–°æ£€æµ‹
- é˜²æ­¢æ— é™æ›´æ–°å¾ªç¯

#### diagnose-*.html ç³»åˆ—
- `diagnose-indexeddb.html` - IndexedDB è¯Šæ–­
- `diagnose-simple.html` - ç®€å•è¯Šæ–­æµ‹è¯•
- `diagnose-pooling-system.html` - äº‹ä»¶æ± è¯Šæ–­
- `diagnose-parent-child.html` - çˆ¶å­å…³ç³»è¯Šæ–­

---

## 4. æŠ€æœ¯æ¶æ„

### 4.1 æ•°æ®æ¥æº

```typescript
// äº‹ä»¶æ•°æ®
interface Event {
  id: string;
  title: {
    simpleTitle: string;
  };
  startTime: string;  // "YYYY-MM-DD HH:mm:ss"
  endTime: string;
  tags?: string[];     // æ ‡ç­¾IDæ•°ç»„
  calendarIds?: string[]; // æ—¥å†IDæ•°ç»„
  source?: string;     // "outlook" | "google" | "local"
}

// æ ‡ç­¾æ•°æ®
interface Tag {
  id: string;
  name: string;
  emoji?: string;
  color?: string;
  level: number;       // å±‚çº§ï¼š0, 1, 2...
}

// æ—¥å†æ•°æ®ï¼ˆç¼“å­˜ï¼‰
interface Calendar {
  id: string;
  name: string;
  color: string;
  source: string;
}
```

### 4.2 æ ¸å¿ƒè®¡ç®—é€»è¾‘

#### æ—¶é•¿è®¡ç®—
```javascript
function getEventDuration(event) {
  if (!event.startTime || !event.endTime) return 0;
  return new Date(event.endTime) - new Date(event.startTime);
}
```

#### æ ‡ç­¾ç»Ÿè®¡
```javascript
function calculateTagStats(events) {
  const tagStatsMap = new Map();
  
  events.forEach(event => {
    const duration = getEventDuration(event);
    
    if (event.tags && event.tags.length > 0) {
      event.tags.forEach(tagId => {
        if (!tagStatsMap.has(tagId)) {
          tagStatsMap.set(tagId, {
            duration: 0,
            count: 0,
            events: []
          });
        }
        const stats = tagStatsMap.get(tagId);
        stats.duration += duration;
        stats.count += 1;
        stats.events.push(event.id);
      });
    }
  });
  
  return tagStatsMap;
}
```

#### æ—¥æœŸèŒƒå›´è¿‡æ»¤
```javascript
function filterEventsByDate(events, startDate, endDate) {
  if (!startDate && !endDate) return events;
  
  return events.filter(event => {
    if (!event.startTime) return false;
    const eventDate = new Date(event.startTime);
    
    if (startDate && eventDate < startDate) return false;
    if (endDate && eventDate > endDate) return false;
    
    return true;
  });
}
```

### 4.3 å¯è§†åŒ–æŠ€æœ¯æ ˆ

**é¥¼å›¾ - SVG Path**
```javascript
// åœ†è§’åœ†ç¯è·¯å¾„ç”Ÿæˆ
function createRoundedArcPath(cx, cy, radius, innerRadius, startAngle, endAngle, cornerRadius) {
  // 1. è®¡ç®—åŸºç¡€ç«¯ç‚¹
  // 2. è®¡ç®—åˆ‡å‘é‡æ–¹å‘
  // 3. åç§»åœ†è§’è·ç¦»
  // 4. ç”Ÿæˆ SVG Path
  // æ”¯æŒï¼šå¤§å¼§åº¦åˆ¤æ–­ã€åœ†è§’è¿‡æ¸¡ã€é—´éš™å¤„ç†
  return `M ... A ... Q ... L ... Z`;
}
```

**æ—¶é—´è½´ - Flexbox**
```css
.hour-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.hour-bar-container {
  display: flex;
  flex: 1;
  gap: 2px;
}

.hour-bar {
  height: 20px;
  background-color: var(--color);
  transition: all 0.2s;
}
```

**åƒç´ å— - Grid + Flex**
```css
.pixel-grid {
  display: flex;
  gap: 0;
}

.pixel-day-column {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.pixel-timeline {
  display: flex;
  flex-direction: column;
}

.pixel-am {
  display: flex;
  flex-direction: column-reverse; /* å‘ä¸Šæ’åˆ— */
}

.pixel-pm {
  display: flex;
  flex-direction: column; /* å‘ä¸‹æ’åˆ— */
}
```

### 4.4 äº¤äº’å¢å¼º

**Tooltip ç³»ç»Ÿ**
```javascript
// å…¨å±€ Tooltip å…ƒç´ 
<div class="pie-tooltip" id="pieTooltip"></div>

// æ˜¾ç¤º Tooltip
function showTooltip(event, text) {
  const tooltip = document.getElementById('pieTooltip');
  tooltip.textContent = text;
  tooltip.classList.add('show');
  tooltip.style.left = (event.pageX + 15) + 'px';
  tooltip.style.top = (event.pageY + 15) + 'px';
}

// éšè— Tooltip
function hideTooltip() {
  document.getElementById('pieTooltip').classList.remove('show');
}
```

**æ‚¬åœé«˜äº®**
```javascript
pathElement.addEventListener('mouseenter', function(e) {
  this.setAttribute('opacity', '1');
  showTooltip(e, tooltipText);
});

pathElement.addEventListener('mouseleave', function() {
  this.setAttribute('opacity', '0.9');
  hideTooltip();
});
```

---

## 5. æ•°æ®ç»“æ„

### 5.1 ç»Ÿè®¡æ•°æ®ç»“æ„

#### æ ‡ç­¾ç»Ÿè®¡
```typescript
interface TagStats {
  id: string;
  name: string;
  emoji?: string;
  color: string;
  level: number;
  duration: number;      // æ¯«ç§’
  count: number;         // äº‹ä»¶æ•°é‡
  percentage: number;    // ç™¾åˆ†æ¯” 0-100
}
```

#### æ—¥å†ç»Ÿè®¡
```typescript
interface CalendarStats {
  id: string;
  name: string;
  color: string;
  source: string;        // "outlook" | "google" | "local" | "calendar"
  duration: number;
  count: number;
  percentage: number;
}
```

#### è¶‹åŠ¿æ•°æ®ï¼ˆæŒ‰å¤©ï¼‰
```typescript
interface DailyStats {
  date: string;          // "YYYY-MM-DD"
  count: number;         // å½“å¤©äº‹ä»¶æ•°
  duration: number;      // å½“å¤©æ€»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
  tags: Set<string>;     // ä½¿ç”¨çš„æ ‡ç­¾é›†åˆ
  hours: {
    [hour: number]: {    // 0-23
      quarters: [        // æ¯å°æ—¶4ä¸ª15åˆ†é’Ÿå—
        {
          type: string;  // æ—¥å†ID æˆ– æ ‡ç­¾å
          color: string;
          title: string;
          eventId: string;
        } | null,
        // ... 3 more quarters
      ]
    }
  }
}
```

#### å…³è”åˆ†ææ•°æ®
```typescript
interface TagCorrelation {
  tag1: string;          // æ ‡ç­¾1åç§°
  tag2: string;          // æ ‡ç­¾2åç§°
  count: number;         // å…±ç°æ¬¡æ•°
}
```

### 5.2 ç¼“å­˜æœºåˆ¶

```javascript
// å…¨å±€ç¼“å­˜
let allEvents = [];           // æ‰€æœ‰äº‹ä»¶
let allTags = [];             // æ‰€æœ‰æ ‡ç­¾
let calendarCache = new Map(); // æ—¥å†ç¼“å­˜ Map<id, Calendar>
let dailyStatsCache = [];     // è¶‹åŠ¿æ•°æ®ç¼“å­˜

// æ—¥å†ç¼“å­˜è·å–
async function getCalendarName(calendarId) {
  if (!calendarCache.has(calendarId)) {
    const calendar = await CalendarService.getCalendarById(calendarId);
    if (calendar) {
      calendarCache.set(calendarId, calendar);
    }
  }
  return calendarCache.get(calendarId)?.name || calendarId;
}
```

---

## 6. æœªæ¥è§„åˆ’

### 6.1 åŠŸèƒ½å¢å¼º

#### Phase 1: åŸºç¡€åŠŸèƒ½å®Œå–„
- [ ] **å¯¼å‡ºåŠŸèƒ½**
  - å¯¼å‡ºç»Ÿè®¡æŠ¥å‘Šä¸º PDF
  - å¯¼å‡ºæ•°æ®ä¸º CSV/Excel
  - æˆªå›¾åˆ†äº«åŠŸèƒ½

- [ ] **è‡ªå®šä¹‰æ—¶é—´èŒƒå›´**
  - å¿«æ·é€‰æ‹©ï¼ˆä»Šå¤©ã€æœ¬å‘¨ã€æœ¬æœˆã€æœ¬å­£åº¦ã€æœ¬å¹´ï¼‰
  - è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´
  - å¯¹æ¯”ä¸åŒæ—¶é—´æ®µ

- [ ] **è¿‡æ»¤å™¨å¢å¼º**
  - æŒ‰æ ‡ç­¾è¿‡æ»¤
  - æŒ‰æ—¥å†è¿‡æ»¤
  - æŒ‰äº‹ä»¶ç±»å‹è¿‡æ»¤ï¼ˆä¼šè®®ã€ä»»åŠ¡ã€ç¬”è®°ç­‰ï¼‰

#### Phase 2: é«˜çº§åˆ†æ
- [ ] **æ—¶é—´æ®µå¯¹æ¯”**
  - æœ¬å‘¨ vs ä¸Šå‘¨
  - æœ¬æœˆ vs ä¸Šæœˆ
  - åŒæ¯”ã€ç¯æ¯”åˆ†æ

- [ ] **æ•ˆç‡åˆ†æ**
  - é«˜æ•ˆæ—¶æ®µè¯†åˆ«
  - ç¢ç‰‡åŒ–æ—¶é—´ç»Ÿè®¡
  - ä¸“æ³¨æ—¶é•¿åˆ†æ

- [ ] **ç›®æ ‡è¿½è¸ª**
  - è®¾å®šæ—¶é—´ç›®æ ‡ï¼ˆå¦‚"æ¯å‘¨è¿åŠ¨3å°æ—¶"ï¼‰
  - ç›®æ ‡å®Œæˆåº¦å¯è§†åŒ–
  - è¿›åº¦æé†’

#### Phase 3: æ™ºèƒ½æ´å¯Ÿ
- [ ] **AI æ¨è**
  - åŸºäºå†å²æ•°æ®æ¨èæœ€ä½³æ—¶é—´å®‰æ’
  - è¯†åˆ«æ—¶é—´æµªè´¹çš„æ¨¡å¼
  - æä¾›ä¼˜åŒ–å»ºè®®

- [ ] **ä¹ æƒ¯åˆ†æ**
  - ä½œæ¯è§„å¾‹åˆ†æ
  - å·¥ä½œæ¨¡å¼è¯†åˆ«ï¼ˆæ—©èµ·/å¤œçŒ«å­ï¼‰
  - é«˜äº§æ—¶æ®µæ ‡æ³¨

- [ ] **é¢„æµ‹åŠŸèƒ½**
  - é¢„æµ‹ä¸‹å‘¨æ—¶é—´åˆ†é…
  - æé†’å¯èƒ½çš„æ—¶é—´å†²çª
  - æ™ºèƒ½æ—¥ç¨‹å»ºè®®

### 6.2 UI/UX ä¼˜åŒ–

- [ ] **å“åº”å¼è®¾è®¡**
  - é€‚é…ç§»åŠ¨ç«¯
  - å¹³æ¿ä¼˜åŒ–
  - è§¦æ‘¸äº¤äº’å¢å¼º

- [ ] **ä¸»é¢˜æ”¯æŒ**
  - æ·±è‰²æ¨¡å¼
  - è‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆ
  - è‰²ç›²å‹å¥½æ¨¡å¼

- [ ] **åŠ¨ç”»ä¼˜åŒ–**
  - æ•°æ®åŠ è½½éª¨æ¶å±
  - è¿‡æ¸¡åŠ¨ç”»
  - å¾®äº¤äº’åé¦ˆ

### 6.3 é›†æˆè®¡åˆ’

- [ ] **é›†æˆåˆ°ä¸»åº”ç”¨**
  - å°†æµ‹è¯•é¡µé¢åŠŸèƒ½é›†æˆåˆ° React ç»„ä»¶
  - ç»Ÿä¸€æ ·å¼ä¸è®¾è®¡è¯­è¨€
  - æ€§èƒ½ä¼˜åŒ–ï¼ˆè™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ï¼‰

- [ ] **ä¸å…¶ä»–æ¨¡å—è”åŠ¨**
  - TimeLog é¡µé¢é›†æˆç»Ÿè®¡é¢æ¿
  - EventEditModal æ˜¾ç¤ºç»Ÿè®¡å¡ç‰‡
  - PlanManager æ˜¾ç¤ºæ—¶é—´é¢„ç®—

- [ ] **æ•°æ®åŒæ­¥**
  - å®æ—¶ç»Ÿè®¡æ›´æ–°
  - åå°è®¡ç®—ä¼˜åŒ–
  - å¢é‡æ›´æ–°æœºåˆ¶

---

## é™„å½•

### A. æµ‹è¯•é¡µé¢æ¸…å•

| æ–‡ä»¶å | è·¯å¾„ | è¡Œæ•° | ä¸»è¦åŠŸèƒ½ |
|--------|------|------|---------|
| test-stats-full.html | public/ | 2157 | æ ‡ç­¾/æ—¥å†ç»Ÿè®¡ã€è¶‹åŠ¿åˆ†æã€å…³è”åˆ†æ |
| test-stats-daily.html | public/ | 916 | æ¯æ—¥24å°æ—¶ç»Ÿè®¡ã€åˆ†ç±»é¥¼å›¾ |
| test-vertical-line-status.html | public/ | 235 | äº‹ä»¶çŠ¶æ€ç«–çº¿æ ‡è¯† |
| test-data-flow.html | public/ | - | æ•°æ®æµæµ‹è¯• |
| test-circular-updates.html | public/ | - | å¾ªç¯æ›´æ–°æ£€æµ‹ |

### B. è‰²å½©è§„èŒƒ

**ä¸»é¢˜æ¸å˜**
- Primary: `linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- èƒŒæ™¯: `linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)`

**çŠ¶æ€é¢œè‰²**
- New: `#3B82F6` (è“è‰²)
- Done: `#10B981` (ç»¿è‰²)
- Updated: `#F59E0B` (æ©™è‰²)
- Missed: `#EF4444` (çº¢è‰²)
- Deleted: `#9CA3AF` (ç°è‰²)

**æ¥æºé¢œè‰²**
- Outlook: `#0078d4` (å¤©è“)
- Google: `#ea4335` (çº¢è‰²)
- Local: `#7b1fa2` (ç´«è‰²)

### C. æ—¶é•¿æ ¼å¼åŒ–è§„èŒƒ

```javascript
function formatDuration(ms) {
  const hours = Math.floor(ms / 3600000);
  const minutes = Math.floor((ms % 3600000) / 60000);
  
  if (hours > 0) {
    return `${hours}h ${minutes}m`;
  }
  return `${minutes}m`;
}
```

### D. å…³é”®ç®—æ³•

#### åƒç´ å—æ—¶é—´æ˜ å°„
```javascript
// å°†äº‹ä»¶æ˜ å°„åˆ°15åˆ†é’Ÿå—
const hour = parseInt(timePart.split(':')[0]);      // å°æ—¶ 0-23
const minute = parseInt(timePart.split(':')[1]);    // åˆ†é’Ÿ 0-59
const quarter = Math.floor(minute / 15);            // å—ç´¢å¼• 0-3

// å—ç´¢å¼•å¯¹åº”æ—¶é—´
// quarter 0: 00-14åˆ†
// quarter 1: 15-29åˆ†
// quarter 2: 30-44åˆ†
// quarter 3: 45-59åˆ†
```

#### åœ†è§’é—´éš™è®¡ç®—
```javascript
// é—´éš™è§’åº¦
const gapAngle = 4; // 4åº¦é—´éš™

// ç»“æŸè§’åº¦è°ƒæ•´ï¼ˆæœ€åä¸€ä¸ªè‰²å—ä¸ç•™é—´éš™ï¼‰
const endAngle = index === visibleData.length - 1 
  ? currentAngle + angle 
  : currentAngle + angle - gapAngle;

// åœ†è§’åŠå¾„é™åˆ¶ï¼ˆä¸è¶…è¿‡å¼§é•¿çš„40%ï¼‰
const actualAngle = endAngle - currentAngle;
const arcLength = (actualAngle * Math.PI / 180) * radius;
const maxCornerRadius = arcLength / 2;
let cornerRadius = Math.min(10, maxCornerRadius * 0.8);
cornerRadius = Math.max(2, cornerRadius); // æœ€å°2px
```

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | æ›´æ–°å†…å®¹ |
|------|------|------|---------|
| v1.0 | 2025-12-15 | Copilot | åˆå§‹ç‰ˆæœ¬ï¼Œæ•´åˆæ‰€æœ‰æ—¶é—´ç»Ÿè®¡æµ‹è¯•é¡µé¢ |

---

## å‚è€ƒèµ„æ–™

- [TimeLog_&_Description_PRD.md](./TimeLog_&_Description_PRD.md) - TimeLog é¡µé¢è®¾è®¡
- [TAGMANAGER_MODULE_PRD.md](./TAGMANAGER_MODULE_PRD.md) - æ ‡ç­¾ç³»ç»Ÿ
- [TIMECALENDAR_MODULE_PRD.md](./TIMECALENDAR_MODULE_PRD.md) - æ—¥å†ç³»ç»Ÿ
- [EventService API æ–‡æ¡£](../architecture/) - äº‹ä»¶æœåŠ¡æ¥å£
- [Figma è®¾è®¡ç¨¿](https://www.figma.com/) - UI/UX è®¾è®¡å‚è€ƒ

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬æ–‡æ¡£åº”éšåŠŸèƒ½è¿­ä»£åŠæ—¶æ›´æ–°ï¼Œç¡®ä¿ä¸å®é™…å®ç°ä¿æŒä¸€è‡´ã€‚
