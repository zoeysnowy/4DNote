# Homepage Dashboard 设计 v2.0

> **版本**: v2.0  
> **创建时间**: 2025-12-15  
> **产品经理**: AI Assistant  
> **设计理念**: 四维时间管理可视化驾驶舱  
> **状态**: 设计提案

---

## 📋 设计概述

### 核心理念

基于 4DNote 的**四维时间管理哲学**（Plan → Actual → TimeLog → Timer），将 Homepage 打造为用户的**时间管理驾驶舱**，通过多维度卡片组合，实现：

1. **快速启动**：一键开始专注工作
2. **实时洞察**：多维度可视化时间使用
3. **智能提醒**：关键事件不遗漏
4. **深度复盘**：基于数据的自我认知

### 设计原则

- ✅ **信息密度适中**：避免信息过载
- ✅ **操作路径最短**：关键功能一键触达
- ✅ **视觉层次清晰**：主次分明，引导视线
- ✅ **灵活可定制**：用户可调整卡片布局和显示内容

---

## 🎨 Dashboard 布局设计

### 整体布局架构

采用 **可响应式 Grid 布局 + 卡片系统**，支持拖拽调整顺序（未来功能）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         4DNote - 时间管理驾驶舱                              │
│  [搜索框] 🔍                                    👤 Zoey  |  ⚙️ Settings      │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────┬──────────────┬──────────────┬──────────────────────────────┐
│ ⏱️ Timer     │ 📊 今日概览   │ 🎯 Focus     │                              │
│  快速计时     │  Today Stats │  专注度      │   📈 时间分布趋势             │
│              │              │              │   (Time Distribution)        │
│ [标签选择]    │ 8.5h / 12h   │ ████████░░   │                              │
│ [开始计时]    │ 71% 完成     │ 85% 专注     │   [标签▼] [日历▼] [本周▼]     │
│              │              │              │                              │
│ 320px x 240px│ 280px x 240px│ 280px x 240px│   (可切换视图类型)            │
├──────────────┴──────────────┴──────────────┤   620px x 480px              │
│                                             │                              │
│ 📅 即将到来 (Upcoming Events)                │                              │
│                                             │                              │
│ ┌─────────────────────────────────────────┐│                              │
│ │ 📌 团队周会 (14:00 - 15:00)             ││                              │
│ │ 🏷️ 工作 · 会议                          ││                              │
│ ├─────────────────────────────────────────┤│                              │
│ │ 📌 产品评审 (16:00 - 17:30)             ││                              │
│ │ 🏷️ 工作 · 设计                          ││                              │
│ └─────────────────────────────────────────┘│                              │
│                                             │                              │
│ 900px x 320px                               │                              │
├─────────────────────────────────────────────┴──────────────────────────────┤
│                                                                             │
│ 🧠 智能洞察 (Insights)                    🏆 成就与目标 (Achievement)      │
│                                                                             │
│ ┌──────────────────────┐  ┌──────────────────────┐  ┌──────────────────┐  │
│ │ 💡 本周工作时长增加   │  │ 🎯 本周目标进度       │  │ 🔥 连续专注      │  │
│ │    15% vs 上周       │  │                      │  │    7天           │  │
│ │ ────────────────     │  │ ████████░░░ 80%      │  │ Keep Going!      │  │
│ └──────────────────────┘  └──────────────────────┘  └──────────────────┘  │
│                                                                             │
│ Full Width x 200px                                                          │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📦 卡片系统设计

### 1. Timer 快速计时卡片 ⏱️

**位置**: 左上角（首要位置）  
**尺寸**: 320px x 240px  
**优先级**: ⭐⭐⭐⭐⭐

#### 功能

- 快速选择标签开始计时
- 显示当前计时状态
- 一键启动/停止
- 最近使用的标签快捷按钮

#### 交互

```
┌────────────────────────┐
│ ⏱️ Timer               │
├────────────────────────┤
│ [🏷️ 工作 ▼]            │  ← 标签选择下拉
│                        │
│ [输入事件标题...]       │  ← 可选输入
│                        │
│      00:00:00          │  ← 计时显示
│                        │
│  [▶️ 开始计时]          │  ← CTA 按钮
│                        │
│ 最近: #工作 #学习 #写作 │  ← 快捷标签
└────────────────────────┘
```

---

### 2. 今日概览卡片 📊

**位置**: 顶部中间  
**尺寸**: 280px x 240px  
**优先级**: ⭐⭐⭐⭐

#### 功能

- 今日已用时间 vs 计划时间
- 完成度百分比
- 核心数据一目了然
- 点击展开详细统计

#### 视觉设计

```
┌────────────────────────┐
│ 📊 今日概览             │
├────────────────────────┤
│                        │
│      8.5h / 12h        │  ← 大字号核心数据
│                        │
│   ████████████░░░░     │  ← 进度条
│      71% 完成          │
│                        │
│  📅 5 events           │  ← 事件数量
│  ⏱️ 3 timers          │  ← 计时数量
│                        │
│  [查看详情 →]          │  ← 跳转到详细统计
└────────────────────────┘
```

---

### 3. 专注度卡片 🎯

**位置**: 顶部右侧  
**尺寸**: 280px x 240px  
**优先级**: ⭐⭐⭐

#### 功能

- 今日专注度评分（基于 Timer 数据）
- 干扰次数统计
- 专注时段可视化
- 健康提醒（久坐提醒等）

#### 数据指标

```
┌────────────────────────┐
│ 🎯 Focus Score         │
├────────────────────────┤
│                        │
│       85%              │  ← 专注度评分
│   ████████████░░       │
│                        │
│  ⏸️ 中断次数: 3        │  ← 干扰统计
│  🍅 番茄钟: 6/8        │  ← 番茄工作法
│                        │
│  💡 建议:              │
│  每小时休息5分钟        │  ← 智能建议
└────────────────────────┘
```

---

### 4. 时间分布趋势 📈

**位置**: 右侧主区域  
**尺寸**: 620px x 480px  
**优先级**: ⭐⭐⭐⭐

#### 功能（现有 StatsPanel 增强版）

- **多维度切换**: 标签 / 日历 / 项目
- **时间范围**: 今天 / 本周 / 本月 / 自定义
- **视图类型**: 饼图 / 趋势图 / 热力图 / 像素图
- **交互钻取**: 点击分类查看详细事件列表

#### 增强功能

1. **对比模式**: 本周 vs 上周，本月 vs 上月
2. **目标线**: 在趋势图上显示目标时间
3. **异常检测**: 标注异常波动（如某天工作时间过长）
4. **导出功能**: 导出统计图表和数据

```
┌────────────────────────────────┐
│ 📈 时间分布趋势                 │
├────────────────────────────────┤
│ [标签▼] [日历▼] [本周▼]         │
│ [饼图] [趋势图] [热力图]         │
├────────────────────────────────┤
│                                │
│     ┌──────┐                   │
│     │饼图  │  ● 工作 45%       │
│     │      │  ● 学习 30%       │
│     └──────┘  ● 娱乐 15%       │
│              ● 其他 10%       │
│                                │
│  ──────────────────────────    │
│   趋势图 (可切换)               │
│   ▁▃▅▇█▇▅▃▁                   │
│                                │
│  [导出] [设置目标]              │
└────────────────────────────────┘
```

---

### 5. 即将到来事件 📅

**位置**: 左下区域  
**尺寸**: 900px x 320px（可滚动）  
**优先级**: ⭐⭐⭐⭐

#### 功能

- 显示未来 24 小时内的事件
- 按时间排序
- 可快速编辑/删除
- 支持拖拽调整时间
- 提醒设置

#### 列表项设计

```
┌─────────────────────────────────────────┐
│ 📅 即将到来 (Upcoming)                   │
│ [今天] [明天] [本周] [筛选🔍]             │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🔴 14:00 - 15:00 (30 min 后)        │ │
│ │ 📌 团队周会                          │ │
│ │ 🏷️ 工作 · 会议  📍 3F 会议室        │ │
│ │ [编辑] [延期] [完成]                │ │
│ ├─────────────────────────────────────┤ │
│ │ ⚪ 16:00 - 17:30                    │ │
│ │ 📌 产品评审                          │ │
│ │ 🏷️ 工作 · 设计  👥 +3              │ │
│ │ [编辑] [延期] [完成]                │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ [查看全部事件 →]                        │
└─────────────────────────────────────────┘
```

---

### 6. 智能洞察 🧠

**位置**: 底部左侧  
**尺寸**: 动态宽度 x 200px  
**优先级**: ⭐⭐⭐

#### 功能

- AI 分析时间使用模式
- 发现效率规律
- 提供优化建议
- 对比历史数据

#### 洞察类型

1. **时间趋势**: "本周工作时长增加 15% vs 上周"
2. **效率模式**: "你在上午 9-11 点效率最高"
3. **健康提醒**: "本周平均工作时长 52h，建议适当休息"
4. **目标提示**: "距离本月目标还差 8 小时"

```
┌──────────────────────┐
│ 🧠 智能洞察           │
├──────────────────────┤
│ 💡 本周工作时长增加   │
│    15% vs 上周       │
│                      │
│ 🎯 建议：            │
│ · 增加休息时间        │
│ · 分散专注时段        │
└──────────────────────┘
```

---

### 7. 成就与目标 🏆

**位置**: 底部右侧  
**尺寸**: 动态宽度 x 200px  
**优先级**: ⭐⭐

#### 功能

- 显示当前目标进度
- 解锁成就徽章
- 连续记录激励
- 分享成就

#### 成就系统

- 🔥 **连续专注**: 连续 N 天使用 Timer
- 📚 **学习达人**: 学习时长超过 100 小时
- ⏰ **早起鸟**: 连续 7 天 8 点前开始工作
- 🎯 **目标达成**: 完成月度目标

```
┌──────────────────────┐
│ 🏆 成就与目标         │
├──────────────────────┤
│ 🎯 本周目标进度       │
│ ████████░░░ 80%      │
│ 32h / 40h            │
│                      │
│ 🔥 连续专注 7 天      │
│ Keep Going!          │
│                      │
│ [查看所有成就]        │
└──────────────────────┘
```

---

## 🎛️ 可定制化设计

### 卡片管理

用户可以：
1. **显示/隐藏卡片**: 通过设置面板选择显示哪些卡片
2. **调整卡片顺序**: 拖拽卡片重新排列（V2功能）
3. **调整卡片大小**: 选择小/中/大尺寸（V2功能）
4. **自定义数据源**: 选择统计的时间范围和维度

### 设置面板

```
┌─────────────────────────┐
│ ⚙️ Dashboard 设置        │
├─────────────────────────┤
│ 显示的卡片:              │
│ ☑️ Timer 快速计时        │
│ ☑️ 今日概览              │
│ ☑️ 专注度                │
│ ☑️ 时间分布趋势          │
│ ☑️ 即将到来              │
│ ☑️ 智能洞察              │
│ ☐ 成就与目标             │
│                         │
│ 默认时间范围:            │
│ ⭕ 今天                  │
│ ⚪ 本周                  │
│ ⚪ 本月                  │
│                         │
│ [保存] [重置为默认]      │
└─────────────────────────┘
```

---

## 🔧 技术实现

### 组件架构

```typescript
HomePage/
├── index.tsx                    // 主容器
├── DashboardGrid.tsx           // Grid 布局管理
├── cards/
│   ├── TimerCard.tsx           // ⏱️ 快速计时
│   ├── TodayStatsCard.tsx      // 📊 今日概览
│   ├── FocusScoreCard.tsx      // 🎯 专注度 (新)
│   ├── TimeDistributionCard.tsx// 📈 时间分布 (现有 StatsPanel)
│   ├── UpcomingEventsCard.tsx  // 📅 即将到来 (现有)
│   ├── InsightsCard.tsx        // 🧠 智能洞察 (新)
│   └── AchievementsCard.tsx    // 🏆 成就与目标 (新)
├── DashboardSettings.tsx       // ⚙️ 设置面板
└── styles/
    └── Dashboard.css
```

### 数据流

```typescript
// Dashboard 配置
interface DashboardConfig {
  visibleCards: string[];      // 显示的卡片列表
  cardOrder: string[];          // 卡片顺序
  defaultTimeRange: 'today' | 'week' | 'month';
  defaultDimension: 'tag' | 'calendar';
}

// 卡片接口
interface DashboardCard {
  id: string;
  title: string;
  component: React.ComponentType;
  defaultSize: { width: number; height: number };
  priority: number;
  dependencies?: string[];      // 依赖的服务
}
```

### 性能优化

1. **虚拟滚动**: 即将到来事件列表使用虚拟滚动
2. **懒加载**: 非首屏卡片延迟加载
3. **数据缓存**: EventTreeIndex 查询结果缓存
4. **防抖节流**: 拖拽和调整大小操作防抖

---

## 📊 数据指标

### 需要的新指标

1. **专注度评分**
   - 基于 Timer 连续性
   - 中断次数
   - 计划完成率

2. **效率模式分析**
   - 每小时产出统计
   - 最佳工作时段识别
   - 疲劳度预测

3. **目标追踪**
   - 周目标 / 月目标
   - 完成率趋势
   - 目标偏差提醒

---

## 🚀 实现路线图

### Phase 1: 基础卡片系统（2周）

- ✅ 保留现有 TimerCard
- ✅ 保留现有 UpcomingEventsPanel
- ✅ 重构 StatsPanel 为 TimeDistributionCard
- 🆕 实现 TodayStatsCard
- 🆕 实现 FocusScoreCard
- 🆕 实现 DashboardGrid 布局

### Phase 2: 智能功能（2周）

- 🆕 实现 InsightsCard（基础洞察）
- 🆕 实现 AchievementsCard
- 🆕 实现 DashboardSettings
- 🆕 本地存储配置持久化

### Phase 3: 高级功能（2周）

- 🆕 卡片拖拽重排
- 🆕 AI 洞察增强
- 🆕 数据导出功能
- 🆕 移动端响应式适配

---

## 🎨 视觉设计规范

### 色彩系统

- **主色**: #4F46E5 (Indigo)
- **成功**: #10B981 (Green)
- **警告**: #F59E0B (Amber)
- **危险**: #EF4444 (Red)
- **背景**: #F9FAFB (Gray-50)
- **卡片**: #FFFFFF

### 圆角与间距

- **卡片圆角**: 12px
- **按钮圆角**: 8px
- **卡片间距**: 20px
- **内边距**: 20px

### 字体

- **标题**: 18px, Medium
- **正文**: 14px, Regular
- **数据**: 24px, Bold
- **辅助**: 12px, Regular

---

## 📝 未来展望

### 可能的扩展

1. **Widget 化**: 支持第三方插件卡片
2. **多 Dashboard**: 工作/生活/学习等场景切换
3. **AI 助手**: 基于 GPT 的智能建议
4. **团队协作**: 团队时间统计 Dashboard
5. **健康追踪**: 整合运动、睡眠数据

---

## 💡 总结

这个 Dashboard v2.0 设计：

✅ **保留了原有优势**: TimerCard、UpcomingEvents、StatsPanel  
✅ **增加了新维度**: 专注度、洞察、成就系统  
✅ **提升了可用性**: 卡片化布局，一目了然  
✅ **预留了扩展性**: 模块化设计，易于添加新卡片  

**核心理念**: 让用户通过一个页面就能：
- 快速开始工作（Timer）
- 了解当前状态（Today Stats、Focus Score）
- 分析时间使用（Time Distribution）
- 提醒重要事项（Upcoming Events）
- 获得改进建议（Insights）
- 保持动力（Achievements）

这不仅仅是一个 Dashboard，而是一个**时间管理的作战指挥中心**。
