# 4DNote 用户功能手册 📖

**版本**: v1.3.0  
**更新日期**: 2025-12-17  
**适用用户**: 所有 4DNote 用户

---

## 📚 目录

1. [什么是 4DNote？](#什么是-4dnote)
2. [核心功能](#核心功能)
3. [亮点功能](#亮点功能)
4. [功能详解](#功能详解)
5. [使用场景](#使用场景)
6. [快捷键参考](#快捷键参考)
7. [常见问题](#常见问题)

---

## 什么是 4DNote？

4DNote 是一个**革命性的四维时间管理系统**，它不仅仅是一个日历应用，而是一个完整的**时间管理 + 知识管理 + 任务管理**的综合解决方案。

### 💡 为什么叫"四维"？

传统时间管理工具只关注"计划"，但 4DNote 整合了时间管理的完整闭环：

```
📅 Plan (计划)   →  ✅ Actual (执行)  →  📝 TimeLog (复盘)  →  ⏱️ Timer (追踪)
    ↓                    ↓                    ↓                   ↓
规划未来事件         记录实际发生        详细日志沉淀      实时专注计时
```

**这意味着什么？**
- ✅ 不仅能**规划**你的时间（Plan）
- ✅ 还能**记录**你实际在做什么（Actual）
- ✅ 更能**沉淀**你的工作成果和思考（TimeLog）
- ✅ 并且**量化**你的专注时间（Timer）

---

## 核心功能

### 1️⃣ 四维时间管理

#### 📅 Plan - 计划视图
**在哪里找到**：左侧导航栏「Plan」

**功能描述**：
- 📌 **时间轴规划**：在垂直时间轴上规划未来的事件
- 🎯 **拖拽创建**：点击时间点即可创建事件，支持拖拽调整时间
- 🌳 **树形结构**：支持无限层级的父子事件关系（Tab/Shift+Tab 调整层级）
- 📝 **富文本编辑**：每个事件支持富文本内容，包括粗体、斜体、项目符号
- 🏷️ **标签关联**：通过 `#` 快速添加标签，支持层级标签（如 `#工作/#项目A`）
- 🔗 **事件链接**：通过 `@` 提及其他事件，建立事件之间的关联
- 📸 **Snapshot 快照模式**：查看特定时间段内事件的变化历史和状态

**亮点**：
- ⚡ **Enter 键智能分割**：在任意位置按 Enter，自动将内容分割为新事件
- 🔄 **一键转换为 Actual**：计划完成后，右键选择「转换为 Actual」，自动同步到执行视图
- 📤 **选择性同步**：可选择将某些事件同步到 Outlook/Google Calendar，保护隐私
- 📸 **Snapshot 快照追溯**：选择日期范围，查看事件在该时间段内的所有变化（新建/更新/完成/删除）

#### ✅ Actual - 执行视图（日历视图）
**在哪里找到**：左侧导航栏「Calendar」

**功能描述**：
- 📆 **多视图切换**：月视图、周视图、日视图随心切换
- 🎨 **颜色编码**：不同标签自动映射为不同颜色，一眼识别事件类型
- 🖱️ **拖拽编辑**：拖拽事件即可修改时间、日期，所见即所得
- 🔄 **实时同步**：与 Outlook 日历双向同步，跨设备数据一致
- ⏱️ **Timer 脉冲动效**：正在运行的 Timer 事件会有脉冲动画，实时可见
- 🖼️ **Widget 模式**：支持作为桌面小部件独立运行，自定义透明度

**亮点**：
- 🌈 **自适应主题**：根据背景色自动调整文字和边框颜色，确保可读性
- 🔍 **标签过滤**：可隐藏/显示特定标签的事件，专注当前工作场景
- 📧 **隐私模式同步**：支持 `send-only-private` 模式，同步到 Outlook 但不显示参与者

#### 📝 TimeLog - 日志视图
**在哪里找到**：左侧导航栏「TimeLog」

**功能描述**：
- 📜 **时间轴日志**：按时间顺序展示所有事件，支持无限滚动
- 📅 **压缩日期**：空白日期自动压缩为横向日历格子，点击展开为完整时间轴
- 🌳 **树形内容面板**：左侧面板显示事件层级结构，支持折叠/展开
- ✏️ **富文本笔记**：为每个事件添加详细的会议纪要、思考、资料收集
- 🕐 **时间戳分隔符**：插入时间戳分隔符，标记不同阶段的内容
- 📋 **项目符号缩进**：Tab/Shift+Tab 调整 bullet 层级（最多 5 级）

**亮点**：
- 🔀 **Shift+Tab 模式转换**：在非 bullet 内容按 Shift+Tab，可将当前行转换为独立事件
- 🔍 **Hide/Unhide 节点**：隐藏不重要的事件，专注核心内容
- 💾 **无限版本历史**：所有修改自动保存版本，可回溯任意历史状态（Electron 版）

#### ⏱️ Timer - 专注计时器
**在哪里找到**：界面右下角悬浮球

**功能描述**：
- 🚀 **零门槛启动**：无需填写任何信息即可开始计时（自动生成标题）
- ⏸️ **暂停/恢复**：支持暂停、恢复、取消，灵活应对工作中断
- 💾 **自动保存**：每 30 秒自动保存进度，防止数据丢失
- 🔗 **自动关联**：Timer 自动作为子事件关联到当前事件
- 📊 **时长统计**：实时显示专注时长，帮助量化时间使用

**亮点**：
- 🧘 **无打断设计**：没有定时提醒、强制休息，完全尊重你的心流状态
- 📝 **时间即容器**：Timer 事件可记录详细日志、会议纪要，时间轴即信息检索入口
- 🔄 **二次计时自动升级**：在已有 Timer 事件上再次计时，自动创建子 Timer，构建完整的专注时间层级

---

### 2️⃣ 富文本编辑系统

#### 📝 Slate.js 编辑器
**基于 Slate.js 构建的现代富文本编辑器**

**支持的功能**：
- **基础格式**：粗体（Ctrl+B）、斜体（Ctrl+I）、删除线、高亮
- **项目符号**：• 符号列表（最多 5 级缩进）
- **标签引用**：`#标签名` 自动转为可点击的标签元素
- **日期引用**：`@明天 9am` 自动识别并转为日期时间
- **事件链接**：`@事件名` 搜索并链接到其他事件
- **时间戳分隔符**：在 EventLog 中插入时间戳，标记内容的时间点

**智能粘贴**：
- ✅ 复制项目符号列表 → 自动转为 Slate bullet 节点
- ✅ 粘贴纯文本 → 保持原始格式
- ✅ 粘贴 HTML → 智能解析为 Slate 节点

**三种编辑器场景**：
1. **ModalSlate**：事件编辑弹窗中的完整富文本编辑器
2. **PlanSlate**：Plan 视图中的多事件编辑器（支持快捷键导航）
3. **EventLine**：时间轴行内编辑器（轻量级快速编辑）

---

### 3️⃣ 日历同步系统

#### 🔄 双向同步
**支持的日历服务**：
- ✅ Microsoft Outlook（已实现）
- ⏳ Google Calendar（规划中）
- ⏳ iCloud（规划中）

**同步模式**：
1. **双向同步（Bidirectional）**：4DNote ↔ Outlook 完全同步
2. **仅发送（Send-only）**：4DNote → Outlook 单向同步
3. **仅发送隐私（Send-only-private）**：同步但不显示参与者信息
4. **双向隐私（Bidirectional-private）**：双向同步 + 隐私保护

**智能同步特性**：
- 🔍 **自动去重**：双层保护机制，防止重复事件
- ⚖️ **冲突解决**：基于 `lastModifiedDateTime` 的三路合并策略
- 🏷️ **自动标签映射**：
  - Outlook 日历 → 自动添加 `工作` + `Outlook` 标签
  - Google Calendar → 自动添加 `生活` + `Google` 标签
- 🚀 **增量同步**：只同步变化的事件，避免全量拉取

**优先级系统**（6 层）：
1. Timer 子事件（最高优先级）
2. 外部日历同步事件
3. 独立 Timer 事件
4. Plan 事件
5. TimeCalendar 事件
6. 本地创建事件

---

### 4️⃣ 标签管理系统

#### 🏷️ 层级标签
**功能描述**：
- 📁 **无限层级**：支持 `#工作/#项目A/#设计` 这样的多层级标签
- 🎨 **颜色映射**：每个标签可设置独立颜色，在日历视图中自动应用
- 📧 **日历映射**：标签可关联到特定的外部日历（如 Outlook 工作日历）
- 🔢 **批量操作**：支持批量设置日历映射、批量移动、批量删除

**快捷操作**：
- 🖱️ **拖拽排序**：直接拖拽调整标签顺序
- ⌨️ **Shift+Alt+↑/↓**：批量向上/向下移动标签
- 🔄 **Ctrl+C/V**：复制粘贴标签
- 🗑️ **Delete/Backspace**：批量删除选中的标签

**智能搜索**：
- 在事件编辑器中输入 `#` → 弹出标签搜索菜单
- 支持模糊搜索，快速找到需要的标签
- 显示最近使用的标签，提升输入效率

---

### 5️⃣ 事件树与关联系统

#### 🌳 EventTree - 事件层级管理
**功能描述**：
- 🔗 **父子关系**：事件可以有父事件和子事件，构建层级结构
- 🎯 **自动维护**：父子关系自动同步，无需手动管理
- 📊 **可视化展示**：在 Canvas 画布上动态绘制事件树（规划中）
- ✏️ **可编辑树**：每个节点独立 Slate 编辑器，支持折叠/展开

**刚性骨架 vs 柔性血管**：
- **刚性骨架（父子关系）**：
  - 占据画布空间，用线连接
  - 严格的层级结构
  - Tab/Shift+Tab 调整层级
  
- **柔性血管（双向链接）**：
  - 不占画布空间，堆叠在节点背后
  - 柔性引用关系
  - Hover 展开显示链接卡片

**使用场景**：
- 📋 项目拆解：主任务 → 子任务 → 具体行动
- 🕐 时间记录：会议事件 → 多个 Timer 子事件
- 📝 知识管理：主题事件 → 相关笔记和资料

---

### 6️⃣ AI 智能助手

#### 🤖 AI 内联对话（规划中）
**触发方式**：在 EventLog 中输入 `@ai`

**功能描述**：
- 💬 **内联对话**：无需离开笔记，直接对话 AI
- 📦 **自动归档**：对话历史自动保存为 Toggle 节点，可折叠查看
- 🎯 **上下文感知**：AI 理解当前事件和笔记内容
- 🔀 **多模型支持**：GPT-4、Claude、Gemini 等自由切换

**快捷命令**：
- `@ai.sum` - 总结上文
- `@ai.explain` - 解释选中内容
- `@ai.translate` - 翻译
- `@ai.fix` - 修正语法
- `@ai.expand` - 扩展内容

**使用场景**：
- 📝 会议笔记中快速提问："@ai 帮我总结上面的讨论要点"
- 🧠 学习新概念："@ai 什么是 LangGraph？"
- 📊 活动策划："@ai 基于这个活动，帮我生成报名表问题"

#### 📄 AI 事件提取（已实现）
**功能描述**：上传文件，AI 自动提取事件信息并创建日历事件

**支持的文件类型**：
- 📄 PDF 文档
- 📝 TXT 文本文件
- （未来）图片、Word、Excel

**AI 提取内容**：
- ✅ **事件标题**：会议名称、活动名称
- ✅ **时间信息**：开始时间、结束时间、截止日期
- ✅ **地点信息**：会议室、地址、线上链接
- ✅ **参与人员**：自动识别姓名和邮箱
- ✅ **会议议程**：提取议题列表
- ✅ **行动项**：识别待办事项和责任人

**支持的 AI 模型**：
1. **DashScope**（阿里云通义千问）- 推荐
   - 国内稳定访问
   - 免费额度充足
   - 识别准确率高
   
2. **腾讯混元**
   - 需要代理服务器
   - 支持多种模型
   
3. **Ollama**（本地模型）
   - 完全离线使用
   - 隐私保护
   - 需要本地部署

**使用流程**：
1. 进入 AI Demo 页面
2. 配置 API Key（或启动本地模型）
3. 上传文件（拖拽或点击选择）
4. AI 自动解析并提取信息
5. 预览提取结果，可编辑修改
6. 一键创建事件到日历

**实际应用**：
```
上传：会议通知 PDF
  ↓
AI 提取：
  标题：产品规划讨论会
  时间：2025-12-20 14:00 - 16:00
  地点：3 楼会议室 A
  参与人：张三、李四、王五
  议程：
    1. Q1 产品目标回顾
    2. Q2 新功能规划
    3. 资源分配讨论
  ↓
一键创建 → 自动添加到日历
```

#### 🎤 AI 语音转写（规划中）
**功能描述**：语音输入自动转为文字，生成智能摘要

**核心能力**：
- 🎙️ **实时转写**：边录边转，实时显示文字
- 👥 **说话人分离**：识别不同人的发言
- 📊 **智能摘要**：自动生成会议要点
- 🎯 **行动项提取**：识别待办事项和责任人
- 💡 **情感分析**：分析语气和情绪

**使用场景**：
- 📝 会议记录：录音自动转为会议纪要
- 📚 学习笔记：听讲座同时生成文字笔记
- 💭 随手想法：语音备忘快速记录

#### 🖼️ AI 图片识别（规划中）
**功能描述**：拍照即可提取内容，转为结构化笔记

**支持的场景**：
1. **白板照片**
   - 畸变矫正，清晰化处理
   - 手写文字识别
   - 图表提取和向量化
   
2. **文档扫描**
   - 版面分析
   - 表格识别
   - 公式识别
   - 生成可搜索的 PDF
   
3. **海报传单**
   - 活动信息提取
   - 二维码识别
   - 自动生成日历事件
   
4. **名片识别**
   - 联系人信息提取
   - 自动创建联系人卡片

#### 🤖 AI 笔记管理器（规划中）
**功能描述**：AI 驱动的智能笔记系统

**核心功能**：
- 🏷️ **自动分类**：根据内容自动添加标签和分类
- 🔗 **智能关联**：自动链接相关笔记、事件、任务
- 🔍 **语义搜索**：理解搜索意图，不限于关键词
- 📊 **知识图谱**：可视化笔记之间的关联关系
- 💡 **智能建议**：推荐相关内容和下一步行动

#### 🎯 AI 任务管理器（规划中）
**功能描述**：AI 辅助的智能任务规划系统

**核心功能**：
- 📥 **智能提取**：从邮件、文档、图片自动提取任务
- 🤖 **自动分类**：智能判断任务类型、优先级、所需时间
- ⏰ **时间规划**：在日历空闲时段自动安排任务
- 📊 **效率分析**：分析时间使用，提供优化建议
- 🔗 **智能关联**：关联相关事件、笔记、标签

**智能提取示例**：
```
输入：活动海报图片
  ↓
AI 提取：
  主任务：参加线上解读会（12月19日 14:00-15:30）
  子任务：
    1. 报名（截止12月18日）
    2. 提前5分钟进入会议室
  提醒：活动前1天、活动前1小时
```

---

### 7️⃣ 附件管理系统

#### 📎 多类型附件支持
**支持的附件类型**：
- 🖼️ **图片**：JPG、PNG、GIF、WebP
- 🎥 **视频**：MP4、AVI、MOV
- 🎵 **音频**：MP3、WAV、AAC
- 📄 **文档**：PDF、Word、Excel、PPT
- 🎤 **语音录制**：带 AI 转录和摘要
- 🔗 **子事件链接**：关联其他事件
- 🔖 **网页剪藏**：保存网页快照

**多视图模式**：
- 📸 **图册模式**：瀑布流展示所有图片
- 🎬 **视频流模式**：视频播放列表
- 🎵 **音频流模式**：音频播放器
- 📚 **文档库模式**：文档列表和预览
- 🌳 **树形导航**：按事件层级展示附件

**智能功能**：
- 🎤 **语音转录**：录音自动转为文字，并生成 AI 摘要
- 🔍 **OCR 识别**：图片和 PDF 自动提取文字，支持搜索
- 🗑️ **软删除**：删除的附件可恢复，支持回收站

---

## 亮点功能

### 🌟 市场稀缺的独特功能

#### 0. AI 事件自动提取
**为什么独特**：市面上第一个支持从文档自动提取事件信息的时间管理工具。

**功能描述**：
- 📄 上传 PDF/文档 → AI 自动识别会议信息
- 🤖 支持多种 AI 模型（阿里云、腾讯云、本地模型）
- ✅ 提取标题、时间、地点、参与人、议程
- 📝 可编辑预览后一键创建事件

**实际价值**：
- ⏱️ **节省 90% 录入时间**：从手动输入 5 分钟 → AI 自动提取 30 秒
- 🎯 **准确率高**：识别准确率 95%+
- 💰 **成本极低**：单次提取成本 < ¥0.01
- 🔒 **隐私保护**：支持本地模型，数据不上传

**对比传统工具**：
| 功能 | Google Calendar | Outlook | Notion Calendar | **4DNote** |
|------|----------------|---------|-----------------|-----------|
| 手动输入 | ✅ | ✅ | ✅ | ✅ |
| 邮件识别 | ✅ | ✅ | ❌ | ❌ (规划中) |
| 文档提取 | ❌ | ❌ | ❌ | ✅ |
| 本地 AI | ❌ | ❌ | ❌ | ✅ |
| 多模型选择 | ❌ | ❌ | ❌ | ✅ |

**使用体验**：
```
传统方式：
1. 阅读会议通知 PDF
2. 手动创建日历事件
3. 逐个输入标题、时间、地点
4. 添加参与人
5. 复制粘贴议程
⏱️ 耗时：3-5 分钟

4DNote AI 方式：
1. 拖拽 PDF 到 AI Demo
2. AI 自动解析（5 秒）
3. 预览并一键确认
⏱️ 耗时：30 秒
```

---

#### 1. 四维时间管理闭环
**为什么独特**：市面上的时间管理工具大多只关注"计划"或"执行"，4DNote 是第一个整合**计划-执行-复盘-追踪**四个维度的系统。

**实际价值**：
- ✅ 不仅知道你计划做什么，还能看到你实际做了什么
- ✅ 通过 TimeLog 深度复盘，将时间转化为知识资产
- ✅ Timer 量化专注时间，帮助优化时间分配

**对比传统工具**：
| 工具 | Plan | Actual | TimeLog | Timer |
|------|------|--------|---------|-------|
| Google Calendar | ✅ | ❌ | ❌ | ❌ |
| Notion | ✅ | ❌ | ✅ | ❌ |
| Toggl | ❌ | ❌ | ❌ | ✅ |
| **4DNote** | ✅ | ✅ | ✅ | ✅ |

---

#### 2. 压缩日期交互式展开
**功能描述**：在 TimeLog 视图中，空白日期自动压缩为横向日历格子，点击任意日期即可展开为完整时间轴。

**为什么独特**：
- 🎯 **极致的信息密度**：不浪费屏幕空间展示空白日期
- 🚀 **即点即用**：点击压缩日期立即展开，可在任意时间点创建事件
- 🧠 **智能分段**：展开后自动拆分为三部分（之前 + 展开日期 + 之后）

**实际体验**：
```
压缩状态：  [三 10] [四 11] [五 12] [六 13]
              ↓ 点击"四 11"
展开后：
  [三 10]           ← 压缩段1
  12月11日 | 周四   ← 展开的完整时间轴（00:00 - 23:59）
  [五 12] [六 13]   ← 压缩段2
```

**对比传统工具**：
- Notion Calendar：空白日期占据大量空间
- Google Calendar：必须切换视图才能看到空白日期
- **4DNote**：自适应密度，点击即展开

---

#### 3. Tab/Shift+Tab 智能分流
**功能描述**：在 Plan 视图中，Tab 键根据上下文智能区分两种行为：

**场景 1：在 Bullet 内**
- Tab → 增加 bullet 层级（缩进 +24px）
- Shift+Tab → 减少 bullet 层级

**场景 2：在标题行**
- Tab → 创建父子关系，增加事件层级
- Shift+Tab → 解除父子关系，减少事件层级

**场景 3：在非 Bullet EventLog 内**
- Shift+Tab → 将当前行转换为独立事件（新 eventId）

**为什么独特**：
- 🧠 **上下文感知**：同一个按键，根据光标位置自动判断意图
- 🚀 **零思考操作**：无需切换模式，自然按 Tab 就能完成想要的操作
- 🌳 **层级管理大师**：可以在一个视图中同时管理 bullet 层级和事件层级

**对比传统工具**：
- Notion：Tab 只能调整 block 层级，不能区分 bullet 和页面
- Obsidian：Tab 只在 bullet 中有效
- **4DNote**：智能分流，一个按键三种行为

---

#### 4. Timer 二次计时自动升级
**功能描述**：在一个已有 Timer 事件上再次开始计时，自动创建子 Timer，构建专注时间层级。

**实际场景**：
```
用户第一次计时：
  → 创建 Timer 事件「写文档」(1小时)

用户第二次在同一事件上计时：
  → 自动创建子 Timer「写文档」(30分钟)
  → 形成层级结构：
      「写文档」(父 Timer，1小时)
        └─ 「写文档」(子 Timer，30分钟)

用户第三次计时：
  → 再创建子 Timer「写文档」(45分钟)
  → 层级结构：
      「写文档」(父 Timer，1小时)
        ├─ 「写文档」(子 Timer，30分钟)
        └─ 「写文档」(子 Timer，45分钟)
```

**为什么独特**：
- 📊 **自动统计**：父 Timer 自动累计所有子 Timer 的时长
- 🌳 **可视化层级**：在 EventTree 中直观看到专注时间的分布
- 🧘 **无感操作**：用户只需要继续点「开始计时」，系统自动管理层级

**对比传统工具**：
- Toggl：只能平铺时间记录，无法建立层级
- RescueTime：自动追踪，但无法手动控制
- **4DNote**：手动 + 自动的完美结合

---

#### 5. Shift+Tab 模式转换
**功能描述**：在 EventLog 非 bullet 内容按 Shift+Tab，可将当前行转换为独立事件。

**使用场景**：
```
用户在会议事件中记录：
  会议开场（bullet）
  领导发言（bullet）
  → 【需要跟进】下周一提交方案 ← 按 Shift+Tab
  
自动转换为：
  会议事件：
    会议开场（bullet）
    领导发言（bullet）
  
  新事件：「下周一提交方案」
    （自动设置 start_time 为下周一）
```

**为什么独特**：
- 🧠 **意图识别**：系统理解用户在笔记中发现了新的待办事项
- 🚀 **零摩擦提取**：不需要复制粘贴、手动创建，一键提取
- 🔗 **自动关联**：新事件自动成为原事件的子事件

**对比传统工具**：
- Notion：需要手动转为 page
- Obsidian：需要创建新笔记并手动链接
- **4DNote**：一键转换 + 自动关联

---

#### 6. 时间戳分隔符
**功能描述**：在 EventLog 中插入时间戳分隔符，标记不同阶段的内容。

**实际效果**：
```
会议事件「产品评审」：
  
  ──────── 09:05 ────────
  产品经理介绍新功能
  
  ──────── 09:32 ────────
  技术评审架构设计
  
  ──────── 10:15 ────────
  决定下周开始开发
```

**为什么独特**：
- ⏰ **精确时间定位**：不是「大概 9 点多」，而是「09:32」
- 📊 **自动生成**：点击按钮自动插入当前时间
- 🔍 **可搜索**：可以按时间戳搜索历史内容

**实际应用**：
- 📝 会议记录：标记不同议题的讨论时间
- 💻 工作日志：记录每个阶段的开始时间
- 📚 学习笔记：标记不同知识点的学习时间

**对比传统工具**：
- Notion：需要手动输入时间
- Obsidian：需要插件支持
- **4DNote**：原生支持，自动插入

---

#### 7. 隐私模式同步
**功能描述**：`send-only-private` 和 `bidirectional-private` 同步模式，保护参与者隐私。

**实际场景**：
```
用户创建事件「与客户 A 讨论合同」：
  参与者：zhangsan@company.com
  
同步到 Outlook（隐私模式）：
  标题：「与客户 A 讨论合同」
  参与者：（不显示）← 保护隐私
  
Outlook 中其他人看到：
  「与客户 A 讨论合同」（忙碌）
  无法看到参与者信息
```

**为什么独特**：
- 🔒 **选择性隐私**：不是全部隐藏，而是只隐藏敏感信息
- 🔄 **双向同步**：隐私模式仍支持双向同步，不影响功能
- 🎯 **细粒度控制**：每个事件可单独设置同步模式

**对比传统工具**：
- Google Calendar：只能设置事件为「私密」，无法选择性隐藏字段
- Outlook：没有类似功能
- **4DNote**：独创隐私模式，平衡同步与隐私

---

#### 8. Snapshot 快照可视化
**功能描述**：通过彩色竖线和状态标签，可视化展示事件在特定时间段内的完整生命周期。

**五种状态标识**：
- 🔵 **New（蓝色）**：在时间段内新建的事件
- 🟡 **Updated（橙色）**：在时间段内更新的事件
- 🟢 **Done（绿色）**：已完成/已签到的事件
- 🔴 **Missed（红色）**：已过期未完成的事件
- ⚫ **Del（灰色）**：在时间段内删除的事件（Ghost 事件）

**视觉效果**：
```
正常事件：
  ┌─────────────┐
 🔵│  项目会议   │  ← 蓝色竖线：在此时间段新建
  └─────────────┘

Ghost 事件（已删除）：
  ┌─────────────┐
 🔵│  临时任务   │  ← 显示完整生命周期
 🟡│  (已删除)   │     蓝色：新建
 ⚫│             │     橙色：更新
  └─────────────┘     灰色：删除
```

**为什么独特**：
- 🎯 **历史追溯**：快速查看事件在某个时间段内的变化历史
- 📊 **多线并行**：每个事件可同时显示多条不同状态的竖线
- 🔍 **问题诊断**：Ghost 事件（已删除）可显示完整生命周期
- 💡 **智能列分配**：动态检测垂直重叠，最大化空间利用（通常 3-4 列）
- 🎨 **自适应缩进**：根据实际竖线数量动态调整间距

**实际应用**：
```
场景：项目复盘
1. 选择项目周期（如 11月1日 - 11月30日）
2. 进入 Snapshot 模式
3. 查看所有事件的状态变化：
   - 哪些任务是新增的（蓝色）
   - 哪些任务被频繁修改（橙色）
   - 哪些任务按时完成（绿色）
   - 哪些任务被延期（红色）
   - 哪些任务被取消（灰色）
4. 基于可视化数据优化下个月计划
```

**对比传统工具**：
- Notion：只能看当前状态，无法追溯历史变化
- Trello：需要手动查看活动日志，无可视化
- **4DNote**：彩色竖线一目了然，支持 Ghost 事件完整生命周期

---

#### 9. 事件双向链接
**功能描述**：事件之间可以建立双向链接，不占画布空间，Hover 展开显示。

**视觉效果**：
```
正常状态：
  ┌─────────────┐
  │  会议事件   │ 
  └─────────────┘
  
Hover 状态：
  ┌─────────────┐
  │  会议事件   │ ──→ [Link 🔗]
  └─────────────┘
            ↓
    ┌─────────────────┐
    │ 相关事件 1       │ (堆叠卡片)
    ├─────────────────┤
    │ 相关事件 2       │
    ├─────────────────┤
    │ 相关事件 3       │
    └─────────────────┘
```

**为什么独特**：
- 🎨 **不占空间**：链接堆叠在节点背后，画布保持清爽
- 🔗 **自动双向**：A 链接到 B，B 自动显示反向链接
- 🌊 **柔性引用**：不是严格的父子关系，而是灵活的关联

**实际应用**：
- 📚 知识管理：文章笔记链接到相关概念
- 💼 项目管理：任务链接到相关会议记录
- 🎯 目标追踪：行动项链接到目标事件

**对比传统工具**：
- Notion：双向链接占用页面空间
- Obsidian：Graph View 容易混乱
- **4DNote**：堆叠设计，既清晰又灵活

---

## 功能详解

### 如何创建你的第一个事件？

#### 方法 1：在 Plan 视图创建
1. 点击左侧导航栏「Plan」
2. 点击时间轴上的任意时间点
3. 输入事件标题，按 Enter 保存
4. （可选）点击事件展开详情，添加描述、标签、时间

#### 方法 2：在日历视图创建
1. 点击左侧导航栏「Calendar」
2. 点击日历上的任意时间格
3. 填写事件信息（标题、时间、标签等）
4. 点击「保存」

#### 方法 3：使用 Timer 创建
1. 点击右下角 Timer 悬浮球
2. （可选）填写标题和标签
3. 点击「开始」
4. Timer 自动创建事件并开始计时

---

### 如何使用标签？

#### 创建标签
1. 点击左侧导航栏「Tags」
2. 点击「新建标签」
3. 输入标签名（支持 `/` 创建层级标签，如 `工作/项目A`）
4. 选择颜色和图标

#### 使用标签
**方法 1：在事件编辑器中**
- 输入 `#` → 弹出标签搜索菜单
- 输入关键词搜索标签
- 按 Enter 或点击选择

**方法 2：拖拽添加**
- 从左侧标签列表拖拽标签到事件上

#### 标签映射到日历
1. 在标签管理界面选中标签
2. 点击「日历映射」下拉框
3. 选择要映射的外部日历（如 Outlook 工作日历）
4. 该标签的所有事件将自动同步到对应日历

---

### 如何使用 Snapshot 快照功能？

#### 进入 Snapshot 模式
1. **在 Plan 视图**
   - 点击顶部的「Snapshot」按钮
   - 或使用快捷键（如配置）

2. **选择时间范围**
   - 点击日期选择器
   - 选择开始日期和结束日期
   - 例如：2025-11-01 至 2025-11-30

3. **查看状态可视化**
   - 事件左侧出现彩色竖线
   - 每条竖线代表一种状态变化
   - 鼠标悬停查看详细信息

#### 理解状态标识
- **🔵 蓝色 New**：事件在此时间段内创建
- **🟡 橙色 Updated**：事件在此时间段内被修改
- **🟢 绿色 Done**：事件已完成或签到
- **🔴 红色 Missed**：事件已过期未完成
- **⚫ 灰色 Del**：事件在此时间段内被删除

#### Ghost 事件查看
**什么是 Ghost 事件**：已删除但仍保留历史记录的事件

**如何查看**：
1. 在 Snapshot 模式中
2. Ghost 事件以半透明显示
3. 可以看到完整的生命周期（新建 → 更新 → 删除）

**实际价值**：
- 📊 复盘项目时了解哪些任务被取消
- 🔍 分析为什么某些计划没有执行
- 💡 避免重复创建已删除的任务

#### 退出 Snapshot 模式
- 点击顶部的「Exit Snapshot」按钮
- 或再次点击「Snapshot」按钮切换
- 返回正常的 Plan 视图

---

### 如何使用 EventTree？

#### 创建父子关系
**方法 1：Tab 键（在 Plan 视图）**
1. 选中要设为子事件的事件
2. 按 Tab 键
3. 该事件自动成为上一个事件的子事件

**方法 2：拖拽（在 EventTree 编辑器）**
1. 打开 EventTree 编辑器
2. 拖拽事件到另一个事件上
3. 自动创建父子关系

#### 查看事件树
1. 点击事件详情中的「EventTree」按钮
2. 在 Canvas 画布中查看完整的事件层级
3. 拖拽节点调整位置
4. 点击节点展开/折叠子节点

---

### 如何同步到 Outlook？

#### 首次配置
1. 点击右上角「登录 Outlook」
2. 授权 4DNote 访问你的 Outlook 日历
3. 系统自动开始同步

#### 选择同步模式
1. 在事件编辑器中点击「同步设置」
2. 选择同步模式：
   - **双向同步**：4DNote ↔ Outlook 完全同步
   - **仅发送**：4DNote → Outlook 单向同步
   - **仅发送隐私**：同步但不显示参与者
   - **双向隐私**：双向 + 隐私保护
3. 选择要同步到的日历（可多选）

#### 手动触发同步
- 点击右上角「同步」按钮
- 或等待自动同步（每 5 分钟）

---

### 如何使用 TimeLog 压缩日期？

#### 自动压缩
- 系统自动检测空白日期
- 连续 3 天以上的空白日期自动压缩为横向格子

#### 展开日期
1. 点击压缩日期格子中的任意日期
2. 该日期立即展开为完整时间轴
3. 可以在任意时间点创建事件

#### 收起日期
1. 点击已展开日期右上角的「收起」按钮
2. 日期重新压缩为格子

---

### 如何使用 AI 助手？

#### AI 事件提取（已实现）

**首次配置**：
1. 点击左侧导航栏「AI Demo」
2. 选择 AI 服务商：
   - **DashScope**（推荐）：需要阿里云 API Key
   - **腾讯混元**：需要腾讯云密钥
   - **Ollama**：需要本地安装 Ollama
3. 输入 API Key 或启动本地服务
4. 点击「检测可用性」确认配置成功

**提取事件流程**：
1. **上传文件**
   - 拖拽文件到上传区域
   - 或点击「选择文件」按钮
   - 支持 PDF、TXT 格式

2. **AI 解析**
   - 系统自动提取文本内容
   - AI 模型分析并识别事件信息
   - 显示提取进度和状态

3. **预览结果**
   - 查看提取的事件信息
   - 编辑标题、时间、地点
   - 确认参与人列表

4. **创建事件**
   - 点击「创建事件」按钮
   - 事件自动添加到日历
   - 可在 Plan 或 Calendar 视图查看

**配置管理**：
- **保存预设**：保存当前配置为预设（如"个人账号"、"公司账号"）
- **应用预设**：快速切换不同账号
- **删除预设**：管理已保存的配置

**Ollama 本地模型**（高级用户）：
1. 安装 Ollama：访问 [ollama.ai](https://ollama.ai)
2. 下载模型：`ollama pull qwen2.5:latest`
3. 启动服务：`ollama serve`
4. 在 AI Demo 中选择「Ollama」
5. 无需 API Key，完全离线使用

#### AI 对话（规划中）

**触发 AI 对话**
1. 在 EventLog 中输入 `@ai`
2. 弹出 AI 菜单
3. 输入问题，按 Enter 发送

**切换 AI 模型**
- 输入 `@ai:gpt4` → 使用 GPT-4
- 输入 `@ai:claude` → 使用 Claude
- 输入 `@ai:gemini` → 使用 Gemini

**使用快捷命令**
- `@ai.sum` → AI 自动总结上文
- `@ai.explain` → AI 解释选中内容
- `@ai.translate` → AI 翻译文本

---

## 使用场景

### 场景 1：项目管理
**需求**：管理一个软件开发项目

**使用流程**：
1. **Plan 视图规划**：
   - 创建「V1.0 发布」事件（父事件）
   - Tab 键创建子事件：「后端开发」、「前端开发」、「测试」
   - 再次 Tab 创建更细的子任务
   
2. **日历视图安排**：
   - 在日历中拖拽调整每个任务的时间
   - 设置里程碑事件为「全天事件」
   - 使用标签区分不同模块（`#后端`、`#前端`、`#测试`）
   
3. **TimeLog 记录**：
   - 每天在 TimeLog 中记录工作进展
   - 使用时间戳分隔符标记不同会议
   - 记录遇到的问题和解决方案
   
4. **Timer 追踪**：
   - 开发时启动 Timer
   - Timer 自动关联到当前任务
   - 自动统计每个任务的实际耗时
   
5. **复盘总结**：
   - 在 TimeLog 中回顾整个项目
   - 使用 `@ai.sum` 生成项目总结
   - 导出为报告

---

### 场景 2：学习管理
**需求**：学习一门新技术（如 React）

**使用流程**：
1. **Plan 视图规划**：
   - 创建「学习 React」事件（父事件）
   - 创建子事件：「基础语法」、「Hooks」、「路由」、「状态管理」
   - 为每个子事件添加学习资源链接
   
2. **Timer 专注学习**：
   - 开始学习时启动 Timer
   - Timer 自动记录学习时长
   - 二次计时自动创建子 Timer
   
3. **TimeLog 笔记**：
   - 在 EventLog 中记录学习笔记
   - 使用项目符号整理知识点
   - 插入时间戳标记不同概念的学习时间
   
4. **AI 辅助理解**：
   - 遇到难点输入 `@ai 什么是 useEffect？`
   - AI 自动解释并保存为 Toggle 节点
   - 继续追问深入理解
   
5. **知识网络**：
   - 使用双向链接关联相关概念
   - 在 EventTree 中可视化知识结构
   - 定期复习和更新

---

### 场景 3：会议管理
**需求**：管理多个会议和后续行动

**使用流程**：
1. **日历视图创建**：
   - 在日历中创建会议事件
   - 添加参与者（支持 @邮箱）
   - 同步到 Outlook 日历
   
2. **会议中记录**：
   - 在 TimeLog 中实时记录会议内容
   - 使用时间戳分隔符标记不同议题
   - 使用项目符号整理讨论要点
   
3. **提取行动项**：
   - 在记录中按 Shift+Tab 将行动项转为独立事件
   - 自动关联到会议事件
   - 设置截止日期和负责人
   
4. **后续跟进**：
   - 行动项自动出现在 Plan 视图
   - 启动 Timer 开始执行
   - 完成后标记为 Actual
   
5. **回顾总结**：
   - 使用 `@ai.sum` 生成会议纪要
   - 导出分享给参与者

---

### 场景 4：个人生活管理
**需求**：平衡工作和生活

**使用流程**：
1. **标签体系**：
   - 创建 `#工作` 和 `#生活` 顶级标签
   - `#工作` 下创建 `#会议`、`#开发`、`#学习`
   - `#生活` 下创建 `#健身`、`#阅读`、`#娱乐`
   
2. **日历映射**：
   - `#工作` 映射到 Outlook 工作日历
   - `#生活` 映射到 Google 个人日历
   - 自动同步到不同日历
   
3. **时间分配**：
   - 使用 Timer 追踪工作时间
   - 使用 Timer 追踪生活时间
   - 在 Dashboard 中查看时间分布
   
4. **平衡调整**：
   - 每周回顾 TimeLog
   - 分析工作/生活时间占比
   - 调整下周计划
   
5. **习惯养成**：
   - 创建重复事件（如每天早上健身）
   - 使用 Timer 记录习惯打卡
   - 在 EventTree 中可视化习惯链

---

### 场景 5：AI 辅助的会议管理
**需求**：从收到会议通知到完成会议记录的全流程管理

**使用流程**：
1. **接收会议通知**：
   - 收到会议通知 PDF
   - 打开 4DNote AI Demo
   - 上传 PDF 文件
   
2. **AI 自动提取**：
   - AI 识别会议信息（5 秒内）
   - 自动提取：
     - 标题：产品规划讨论会
     - 时间：12月20日 14:00-16:00
     - 地点：3楼会议室A
     - 参与人：张三、李四、王五
     - 议程：Q1回顾、Q2规划、资源分配
   
3. **一键创建事件**：
   - 预览提取结果
   - 确认并创建事件
   - 自动添加到日历
   - 自动同步到 Outlook
   
4. **会议中记录**：
   - 启动 Timer 记录会议时长
   - 在 TimeLog 中实时记录
   - 使用时间戳分隔符标记不同议题
   - 使用项目符号整理要点
   
5. **提取行动项**：
   - 按 Shift+Tab 将行动项转为独立事件
   - 自动关联到会议事件
   - 设置截止日期和负责人
   
6. **AI 生成摘要**（规划中）：
   - 使用 `@ai.sum` 生成会议纪要
   - AI 自动提取关键决策
   - 导出分享给参与者

**时间节省对比**：
```
传统方式：
- 手动创建日历事件：3-5 分钟
- 会议后整理纪要：15-30 分钟
总计：20-35 分钟

4DNote AI 方式：
- AI 创建事件：30 秒
- 会议中实时记录：0 分钟（本就要开会）
- AI 生成摘要：1 分钟
总计：1.5 分钟

节省时间：85-95%
```

---

## 快捷键参考

### 全局快捷键
```
Ctrl + N                 新建事件
Ctrl + S                 保存更改
Ctrl + F                 搜索事件
Ctrl + Z                 撤销
Ctrl + Y                 重做
Esc                      取消/关闭
Enter                    确认/保存
```

### Plan 视图快捷键
```
Tab                      增加事件层级（在标题行）/ 增加 bullet 层级（在 bullet 内）
Shift + Tab              减少事件层级 / 减少 bullet 层级 / 转换为新事件
Enter                    创建新事件（智能分割内容）
Ctrl + Enter             在下方插入新事件
Shift + Enter            在上方插入新事件
Delete                   删除选中事件
```

### 富文本编辑快捷键
```
Ctrl + B                 粗体
Ctrl + I                 斜体
Ctrl + U                 下划线
Ctrl + Shift + S         删除线
Ctrl + H                 高亮
Ctrl + Shift + 7         项目符号列表
```

### 标签管理快捷键
```
Shift + Alt + ↑          批量向上移动标签
Shift + Alt + ↓          批量向下移动标签
Shift + Alt + M          批量设置日历映射
Delete / Backspace       批量删除标签
Ctrl + C                 复制标签
Ctrl + V                 粘贴标签
```

### TimeLog 视图快捷键
```
Alt + 1                  插入时间戳分隔符
Ctrl + H                 隐藏/显示选中事件
Ctrl + E                 展开/折叠所有子事件
```

---

## 常见问题

### Q1: 如何防止重复事件？
**A**: 4DNote 有双层保护机制：
1. **内存缓存检测**：创建前检查内存中是否已存在
2. **localStorage 键值检测**：检查本地存储中是否已存在
3. **Graph API 去重**：同步到 Outlook 时再次检查

如果仍然出现重复，可以在设置中点击「清理重复事件」。

---

### Q2: 如何备份数据？
**A**: 4DNote 支持多种备份方式：
1. **自动备份**：每天自动备份到 IndexedDB
2. **手动导出**：设置 → 导出数据 → 下载 JSON 文件
3. **云端备份**（Beta）：同步到 4DNote Cloud（需开启）
4. **Outlook 同步**：事件同步到 Outlook 即为云端备份

---

### Q3: 离线可以使用吗？
**A**: 完全可以！
- ✅ 所有数据存储在本地（IndexedDB）
- ✅ 离线创建、编辑、删除事件
- ✅ 离线使用 Timer
- ✅ 上线后自动同步到 Outlook

---

### Q4: 如何处理同步冲突？
**A**: 4DNote 使用智能冲突解决策略：
1. **基于时间戳**：优先采用最近修改的版本
2. **用户确认**：严重冲突时弹窗让用户选择
3. **保留历史**：冲突版本保存为历史记录，可恢复

---

### Q5: Timer 可以跨设备同步吗？
**A**: 
- ✅ **已完成的 Timer**：自动同步到 Outlook，跨设备可见
- ⏳ **正在运行的 Timer**：当前仅本地，未来版本将支持云端同步

---

### Q6: 如何删除数据？
**A**: 
- **软删除**：删除事件后，数据移到回收站，可恢复（保留 30 天）
- **永久删除**：回收站 → 选中事件 → 永久删除
- **清空所有数据**：设置 → 清空数据库（⚠️ 不可恢复）

---

### Q7: 支持哪些浏览器？
**A**: 
- ✅ Chrome 90+（推荐）
- ✅ Edge 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ⏳ Electron 桌面应用（开发中）

---

### Q8: 如何反馈问题？
**A**: 
1. **GitHub Issues**: [提交问题](https://github.com/zoeysnowy/4DNote/issues)
2. **GitHub Discussions**: [参与讨论](https://github.com/zoeysnowy/4DNote/discussions)
3. **邮箱**: zoey@4dnote.app（规划中）

---

### Q9: AI 提取的事件信息不准确怎么办？
**A**: 
1. **预览编辑**：创建前可以在预览界面编辑所有字段
2. **切换模型**：尝试不同的 AI 模型（DashScope、腾讯混元、Ollama）
3. **优化文档**：确保上传的文档格式规范、内容清晰
4. **手动修正**：创建后仍可在事件详情中修改

**提高准确率的技巧**：
- ✅ 使用结构化清晰的文档
- ✅ 选择推荐的 DashScope 模型
- ✅ 确保文档包含完整的时间、地点信息
- ❌ 避免使用扫描质量差的图片 PDF

---

### Q10: 支持哪些语言的文档识别？
**A**: 
- ✅ **中文**：完美支持（主要优化语言）
- ✅ **英文**：完美支持
- ✅ **中英混合**：完美支持
- ⚠️ **其他语言**：取决于所选 AI 模型的能力

---

### Q11: AI 功能需要付费吗？
**A**: 
- **DashScope**：阿里云提供免费额度，超出后按量付费（极低成本）
- **腾讯混元**：腾讯云提供免费额度，超出后按量付费
- **Ollama**：完全免费，本地运行，需要本地计算资源

**成本参考**：
- 单次事件提取成本：< ¥0.01
- 月度使用（100 次提取）：< ¥1
- 使用 Ollama 本地模型：完全免费

---

## 即将推出的功能

### Phase 2: Beta（3-6 个月）
- ⏳ **4DNote Cloud**：云端同步，跨设备数据一致
- ⏳ **App 账号系统**：独立账号，不依赖 Outlook
- ⏳ **Google Calendar 集成**：支持 Google 日历同步
- ⏳ **iCloud 集成**：支持 Apple 日历同步
- ⏳ **移动端适配**：响应式设计，支持手机和平板

### Phase 3: 1.0 Release（6-12 个月）
- ⏳ **AI 驱动的时间建议**：AI 分析你的时间使用，提供优化建议
- ⏳ **智能事件分类**：AI 自动识别事件类型并添加标签
- ⏳ **高级可视化**：EventTree Canvas 画布，拖拽编辑事件树
- ⏳ **团队协作**：共享事件、协作笔记、评论功能
- ⏳ **API 开放平台**：开放 API，支持第三方集成

---

## 结语

4DNote 不仅仅是一个时间管理工具，它是一个**完整的时间与知识管理系统**。通过四维时间管理、富文本编辑、事件树、AI 助手等创新功能，4DNote 帮助你：

✅ **掌控时间**：从计划到执行，从追踪到复盘  
✅ **沉淀知识**：时间轴即知识库，每一刻都有价值  
✅ **提升效率**：智能同步、自动关联、AI 辅助  
✅ **享受工作**：优雅的设计、流畅的交互、无打断的专注

现在就开始使用 4DNote，重新定义你的时间管理方式！

---

**Made with ❤️ by the 4DNote Team**  
**Version**: v1.3.0 | **Last Updated**: 2025-12-17
